(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ 101:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"panel":"Panel_panel__3fJzM","panelHeader":"Panel_panelHeader__9X-9f","panelBody":"Panel_panelBody__mh3Ll","inFocus":"Panel_inFocus__3qWYf"};

/***/ }),

/***/ 126:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"loader":"Loader_loader__1nXm4"};

/***/ }),

/***/ 134:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"mainWrapper":"main_mainWrapper__1Ly04","panelsGrid":"main_panelsGrid__2hfGX","grid1":"main_grid1__2U-o-","grid2":"main_grid2__12MzE","mycheckbox":"main_mycheckbox__3nU6I"};

/***/ }),

/***/ 273:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(458);


/***/ }),

/***/ 28:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"detailWrapper":"ContactDetailPanel_detailWrapper__30sgI","detailData":"ContactDetailPanel_detailData__23CuF","detailForm":"ContactDetailPanel_detailForm__2Tjzf","dataList":"ContactDetailPanel_dataList__qVuf2","contactsList":"ContactDetailPanel_contactsList__rCo2D","groupsList":"ContactDetailPanel_groupsList__3sGkf"};

/***/ }),

/***/ 31:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"groupsWrapper":"GroupDetailPanel_groupsWrapper__1WZcv","subGroups":"GroupDetailPanel_subGroups__3XiYN","nominatives":"GroupDetailPanel_nominatives__1as5d"};

/***/ }),

/***/ 4:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"button":"common_button__3i05i","actionButton":"common_actionButton__fHtRI","field":"common_field__3Dg5N","tabActions":"common_tabActions__2K4ln","buttonRow":"common_buttonRow__TpAUS","listedContent":"common_listedContent__1zBX8","modalList":"common_modalList__2C7CO","modalItem":"common_modalItem__3twHv","list":"common_list__DGTGR"};

/***/ }),

/***/ 41:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"panelSelector":"PanelSelector_panelSelector__hM1k0","selectorOptions":"PanelSelector_selectorOptions__27e2R","selectorItem":"PanelSelector_selectorItem__1xb8P","closed":"PanelSelector_closed__1ck4-","opened":"PanelSelector_opened__3QlPU","admin":"PanelSelector_admin__uct2Q"};

/***/ }),

/***/ 457:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 458:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(0);
var react_default = /*#__PURE__*/__webpack_require__.n(react);

// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(80);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(1);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(5);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectSpread.js + 1 modules
var objectSpread = __webpack_require__(29);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(9);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(10);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js + 1 modules
var possibleConstructorReturn = __webpack_require__(12);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js
var getPrototypeOf = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules
var inherits = __webpack_require__(13);

// EXTERNAL MODULE: ./node_modules/react-toastify/lib/index.js
var lib = __webpack_require__(3);

// CONCATENATED MODULE: ./src/types.d.ts
var PanelType;(function(PanelType){PanelType["GROUPS"]="GROUPS";PanelType["GROUP_DETAILS"]="GROUP_DETAILS";PanelType["LOGS"]="LOGS";PanelType["CONTACTS"]="CONTACTS";PanelType["CONTACT_DETAILS"]="CONTACT_DETAIL";PanelType["PERMISSION"]="PERMISSIONS";PanelType["IMPORT"]="IMPORT";})(PanelType||(PanelType={}));
// CONCATENATED MODULE: ./src/context/panelContext.ts
var PanelContext=Object(react["createContext"])({loggedUser:undefined,roles:new Array(),rolesPermission:new Array(),permissions:new Array(),channels:new Array(),panels:new Array(),focusedIndex:'',onGoBack:function onGoBack(panelId){return function(event){};},onMerge:function onMerge(){},onSplit:function onSplit(){},onSelect:function onSelect(type,id,resId,currentState){},onFocus:function onFocus(event){},focusId:function focusId(id){},getCache:function getCache(panel,key){return null;},setCache:function setCache(panel,key,value){}});
// EXTERNAL MODULE: ./src/components/Panel/Panel.module.css
var Panel_module = __webpack_require__(101);
var Panel_module_default = /*#__PURE__*/__webpack_require__.n(Panel_module);

// EXTERNAL MODULE: ./src/components/Panel/PanelSelector/PanelSelector.module.css
var PanelSelector_module = __webpack_require__(41);
var PanelSelector_module_default = /*#__PURE__*/__webpack_require__.n(PanelSelector_module);

// CONCATENATED MODULE: ./src/components/Panel/PanelSelector/PanelSelector.tsx
var PanelSelector_PanelSelector=/*#__PURE__*/function(_PureComponent){Object(inherits["a" /* default */])(PanelSelector,_PureComponent);function PanelSelector(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,PanelSelector);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(PanelSelector)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={open:false};_this.handleOpening=function(){return _this.setState(function(prevState){return{open:!prevState.open};});};_this.selectContact=function(){return _this.context.onSelect(PanelType.CONTACTS,_this.props.id);};_this.selectGroups=function(){return _this.context.onSelect(PanelType.GROUPS,_this.props.id);};_this.selectLogs=function(){return _this.context.onSelect(PanelType.LOGS,_this.props.id);};_this.selectPermission=function(){return _this.context.onSelect(PanelType.PERMISSION,_this.props.id);};_this.selectImport=function(){return _this.context.onSelect(PanelType.IMPORT,_this.props.id);};_this.getNameFromPanelType=function(panelType){switch(panelType){case PanelType.LOGS:return'ðŸ—‚ LOGS';case PanelType.CONTACTS:return'ðŸ“‘ NOMINATIVI';case PanelType.CONTACT_DETAILS:return'ðŸ“‘ DET NOMINATIVO';case PanelType.GROUPS:return'ðŸ—ƒ GRUPPI';case PanelType.GROUP_DETAILS:return'ðŸ—ƒ DET GRUPPO';case PanelType.PERMISSION:return'âš™ï¸ PERMESSI';case PanelType.IMPORT:return'ðŸŒŸ IMPORTA';}};return _this;}Object(createClass["a" /* default */])(PanelSelector,[{key:"render",value:function render(){var selected=this.props.selected;var open=this.state.open;return react_default.a.createElement("div",{className:"".concat(PanelSelector_module_default.a.panelSelector)},react_default.a.createElement("ul",{onClick:this.handleOpening,className:"".concat(PanelSelector_module_default.a.selectorOptions," ").concat(open?PanelSelector_module_default.a.opened:PanelSelector_module_default.a.closed," ").concat(this.context.loggedUser&&this.context.loggedUser.permission?PanelSelector_module_default.a.admin:'')},open&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("li",{className:PanelSelector_module_default.a.selectorItem,onClick:this.selectContact},this.getNameFromPanelType(PanelType.CONTACTS)),react_default.a.createElement("li",{className:PanelSelector_module_default.a.selectorItem,onClick:this.selectGroups},this.getNameFromPanelType(PanelType.GROUPS)),react_default.a.createElement("li",{className:PanelSelector_module_default.a.selectorItem,onClick:this.selectLogs},this.getNameFromPanelType(PanelType.LOGS)),this.context.loggedUser.write&&react_default.a.createElement("li",{className:PanelSelector_module_default.a.selectorItem,onClick:this.selectImport},this.getNameFromPanelType(PanelType.IMPORT))),!open&&react_default.a.createElement("li",{className:PanelSelector_module_default.a.selectorItem},this.getNameFromPanelType(selected))));}}]);return PanelSelector;}(react["PureComponent"]);PanelSelector_PanelSelector.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/PanelSelector/index.tsx

// EXTERNAL MODULE: ./node_modules/ag-grid-react/main.js
var main = __webpack_require__(81);

// EXTERNAL MODULE: ./src/components/Loader/Loader.module.css
var Loader_module = __webpack_require__(126);
var Loader_module_default = /*#__PURE__*/__webpack_require__.n(Loader_module);

// CONCATENATED MODULE: ./src/components/Loader/Loader.tsx
var Loader_Loader=function Loader(){return react_default.a.createElement("div",{className:Loader_module_default.a.loader},"Loading....");};
// CONCATENATED MODULE: ./src/components/Loader/index.ts

// CONCATENATED MODULE: ./src/resources.ts
//const host = "https://vm184lnx.ente.regione.emr.it:8443"
var host="";//const baseUrl = "/api/jsonws/Rubrica-portlet."
var baseUrl="/api/jsonws/rubrica.";var endpoints={//groups:
//`${host + baseUrl}rubricagruppo/groups`,
groupsGet:"".concat(host+baseUrl,"rubricagruppo/get-groups"),groupsInsert:"".concat(host+baseUrl,"rubricagruppo/add-group"),groupsUpdate:"".concat(host+baseUrl,"rubricagruppo/update-groups"),groupsDelete:"".concat(host+baseUrl,"rubricagruppo/delete-groups"),groupsMultiDelete:"".concat(host+baseUrl,"rubricagruppo/delete-groups-multi"),groupsMulti:"".concat(host+baseUrl,"rubricagruppo/groups-multi"),groupNominatives:{insert:"".concat(host+baseUrl,"rubricagrupponominativi/add-group-nominatives"),delete:"".concat(host+baseUrl,"rubricagrupponominativi/delete-group-nominatives")},groupNominativesMulti:{insert:"".concat(host+baseUrl,"rubricagrupponominativi/add-group-nominatives-multi"),delete:"".concat(host+baseUrl,"rubricagrupponominativi/delete-group-nominatives-multi")},subgroups:{insert:"".concat(host+baseUrl,"rubricagruppogruppi/add-group-subgroups"),delete:"".concat(host+baseUrl,"rubricagruppogruppi/delete-group-subgroups"),update:"".concat(host+baseUrl,"rubricagruppogruppi/update-group-subgroups")},subgroupsMulti:{insert:"".concat(host+baseUrl,"rubricagruppogruppi/add-group-multi-subgroups"),delete:"".concat(host+baseUrl,"rubricagruppogruppi/delete-group-multi-subgroups")},supergroupsMulti:{insert:"".concat(host+baseUrl,"rubricagruppogruppi/add-group-multi-supergroups"),delete:"".concat(host+baseUrl,"rubricagruppogruppi/delete-group-multi-supergroups")},nominativesGet:"".concat(host+baseUrl,"rubricanominativo/get-nominatives"),nominativesUpdate:"".concat(host+baseUrl,"rubricanominativo/update-nominatives"),nominativesInsert:"".concat(host+baseUrl,"rubricanominativo/insert-nominatives"),nominativesDelete:"".concat(host+baseUrl,"rubricanominativo/delete-nominatives"),nominativesMulti:"".concat(host+baseUrl,"rubricanominativo/nominatives-multi"),nominativesGroupsMulti:{insert:"".concat(host+baseUrl,"rubricanominativo/add-nominatives-groups-multi"),delete:"".concat(host+baseUrl,"rubricanominativo/delete-nominatives-groups-multi")},contacts:{insert:"".concat(host+baseUrl,"rubricacontatto/add-contacts"),delete:"".concat(host+baseUrl,"rubricacontatto/delete-contacts"),update:"".concat(host+baseUrl,"rubricacontatto/update-contacts")},contactsMulti:"".concat(host+baseUrl,"rubricacontatto/delete-contacts-multi"),roles:"".concat(host+baseUrl,"rubricaruolorubrica/get-address-book-roles"),permission:"".concat(host+baseUrl,"rubricapermessi/get-permission"),rolePermission:"".concat(host+baseUrl,"rubricaruolopermessi/get-role-permission"),channels:"".concat(host+baseUrl,"rubricacanale/get-channels"),logs:"".concat(host+baseUrl,"rubricalog/get-logs"),loggedUser:"".concat(host+baseUrl,"rubricaruolopermessi/get-user-info")};var resources_headers=new Headers();resources_headers.append('Cookie','JSESSIONID=1B406693174873A0DB2B429F9C4C4083.node01');resources_headers.append('Access-Control-Allow-Origin','https://vm184lnx.ente.regione.emr.it:8443');var getFetch=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(url,params){var d,ts,aut,res,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:d=new Date();ts=d.getTime();// to include session cookies, if does not work try using 'include'
aut="p_auth="+window["Liferay"].authToken;_context.next=5;return fetch("".concat(url,"?").concat(aut,"&").concat(params),{headers:resources_headers,method:"GET",credentials:"include"});case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;data.timestamp=ts;if(!(data.code!==200)){_context.next=13;break;}console.error('api error:',data.error);throw new Error(data.error);case 13:return _context.abrupt("return",data);case 14:case"end":return _context.stop();}}},_callee);}));return function getFetch(_x,_x2){return _ref.apply(this,arguments);};}();var postFetch=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(url,obj,params){var form,aut,fetchUrl,res,data;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:form=new FormData();form.append('data',JSON.stringify(obj));aut="p_auth="+window["Liferay"].authToken;fetchUrl=params?"".concat(url,"?").concat(aut,"&").concat(params):"".concat(url,"?").concat(aut);_context2.next=6;return fetch(fetchUrl,{headers:resources_headers,method:'POST',credentials:"include",body:form});case 6:res=_context2.sent;_context2.next=9;return res.json();case 9:data=_context2.sent;if(!(data.code>=300)){_context2.next=13;break;}console.error('api error:',data.error);throw new Error(data.error);case 13:console.log(data.success);return _context2.abrupt("return",data);case 15:case"end":return _context2.stop();}}},_callee2);}));return function postFetch(_x3,_x4,_x5){return _ref2.apply(this,arguments);};}();var putFetch=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(url,params,obj){var form,aut,fetchUrl,res,data;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:form=new FormData();form.append('data',JSON.stringify(obj));aut="p_auth="+window["Liferay"].authToken;fetchUrl=params?"".concat(url,"?").concat(aut,"&").concat(params):"".concat(url,"?").concat(aut);_context3.next=6;return fetch(fetchUrl,{headers:resources_headers,method:'POST',credentials:"include",body:form});case 6:res=_context3.sent;_context3.next=9;return res.json();case 9:data=_context3.sent;if(!(data.code>=300)){_context3.next=13;break;}console.error('api error:',data.error);throw new Error(data.error);case 13:console.log(data.success);return _context3.abrupt("return",data);case 15:case"end":return _context3.stop();}}},_callee3);}));return function putFetch(_x6,_x7,_x8){return _ref3.apply(this,arguments);};}();var deleteFetch=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(url,params,obj){var form,aut,fetchUrl,res,data;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:form=new FormData();form.append('data',JSON.stringify(obj));aut="p_auth="+window["Liferay"].authToken;fetchUrl=params?"".concat(url,"?").concat(aut,"&").concat(params):"".concat(url,"?").concat(aut);_context4.next=6;return fetch(fetchUrl,{headers:resources_headers,method:'POST',credentials:"include",body:form});case 6:res=_context4.sent;_context4.next=9;return res.json();case 9:data=_context4.sent;if(!(data.code>=300)){_context4.next=13;break;}console.error('api error:',data.error);throw new Error(data.error);case 13:console.log(data.success);return _context4.abrupt("return",data);case 15:case"end":return _context4.stop();}}},_callee4);}));return function deleteFetch(_x9,_x10,_x11){return _ref4.apply(this,arguments);};}();var getGroups=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var name,limit,offset,params,data,_args5=arguments;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:name=_args5.length>0&&_args5[0]!==undefined?_args5[0]:"";limit=_args5.length>1&&_args5[1]!==undefined?_args5[1]:10000;offset=_args5.length>2&&_args5[2]!==undefined?_args5[2]:0;params=new URLSearchParams();params.append("name",name);params.append("limit",limit.toString());params.append("offset",offset.toString());_context5.prev=7;_context5.next=10;return getFetch(endpoints.groupsGet,params.toString());case 10:data=_context5.sent;console.log(data);return _context5.abrupt("return",data);case 15:_context5.prev=15;_context5.t0=_context5["catch"](7);throw _context5.t0;case 18:case"end":return _context5.stop();}}},_callee5,null,[[7,15]]);}));return function getGroups(){return _ref5.apply(this,arguments);};}();var getNominatives=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(){var name,limit,offset,params,data,_args6=arguments;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:name=_args6.length>0&&_args6[0]!==undefined?_args6[0]:"";limit=_args6.length>1&&_args6[1]!==undefined?_args6[1]:10;offset=_args6.length>2&&_args6[2]!==undefined?_args6[2]:0;params=new URLSearchParams();params.append("name",name);params.append("limit",limit.toString());params.append("offset",offset.toString());_context6.prev=7;_context6.next=10;return getFetch(endpoints.nominativesGet,params.toString());case 10:data=_context6.sent;return _context6.abrupt("return",data);case 14:_context6.prev=14;_context6.t0=_context6["catch"](7);throw _context6.t0;case 17:case"end":return _context6.stop();}}},_callee6,null,[[7,14]]);}));return function getNominatives(){return _ref6.apply(this,arguments);};}();var getPermissions=/*#__PURE__*/function(){var _ref7=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee7(){var data;return regenerator_default.a.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return getFetch(endpoints.permission);case 3:data=_context7.sent;return _context7.abrupt("return",data);case 7:_context7.prev=7;_context7.t0=_context7["catch"](0);throw _context7.t0;case 10:case"end":return _context7.stop();}}},_callee7,null,[[0,7]]);}));return function getPermissions(){return _ref7.apply(this,arguments);};}();var getRolesPermission=/*#__PURE__*/function(){var _ref8=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee8(){var data;return regenerator_default.a.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return getFetch(endpoints.rolePermission,'');case 3:data=_context8.sent;return _context8.abrupt("return",data);case 7:_context8.prev=7;_context8.t0=_context8["catch"](0);throw _context8.t0;case 10:case"end":return _context8.stop();}}},_callee8,null,[[0,7]]);}));return function getRolesPermission(){return _ref8.apply(this,arguments);};}();var getRoles=/*#__PURE__*/function(){var _ref9=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee9(){var data;return regenerator_default.a.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return getFetch(endpoints.roles);case 3:data=_context9.sent;return _context9.abrupt("return",data);case 7:_context9.prev=7;_context9.t0=_context9["catch"](0);throw _context9.t0;case 10:case"end":return _context9.stop();}}},_callee9,null,[[0,7]]);}));return function getRoles(){return _ref9.apply(this,arguments);};}();var getChannels=/*#__PURE__*/function(){var _ref10=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee10(){var data;return regenerator_default.a.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return getFetch(endpoints.channels);case 3:data=_context10.sent;return _context10.abrupt("return",data);case 7:_context10.prev=7;_context10.t0=_context10["catch"](0);throw _context10.t0;case 10:case"end":return _context10.stop();}}},_callee10,null,[[0,7]]);}));return function getChannels(){return _ref10.apply(this,arguments);};}();var getLoggedUser=/*#__PURE__*/function(){var _ref11=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee11(){var data;return regenerator_default.a.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.prev=0;_context11.next=3;return getFetch(endpoints.loggedUser);case 3:data=_context11.sent;return _context11.abrupt("return",data);case 7:_context11.prev=7;_context11.t0=_context11["catch"](0);throw _context11.t0;case 10:case"end":return _context11.stop();}}},_callee11,null,[[0,7]]);}));return function getLoggedUser(){return _ref11.apply(this,arguments);};}();var getLogs=/*#__PURE__*/function(){var _ref12=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee12(name){var limit,offset,params,data,_args12=arguments;return regenerator_default.a.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:limit=_args12.length>1&&_args12[1]!==undefined?_args12[1]:10;offset=_args12.length>2&&_args12[2]!==undefined?_args12[2]:0;params=new URLSearchParams();params.append("name",name);params.append("limit",limit.toString());params.append("offset",offset.toString());_context12.next=8;return getFetch(endpoints.logs,params.toString());case 8:data=_context12.sent;return _context12.abrupt("return",data);case 10:case"end":return _context12.stop();}}},_callee12);}));return function getLogs(_x12){return _ref12.apply(this,arguments);};}();var getNominativeById=/*#__PURE__*/function(){var _ref13=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee13(id){var params,data;return regenerator_default.a.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:params=new URLSearchParams();params.append("id",id.toString());_context13.next=4;return getFetch(endpoints.nominativesGet,params.toString());case 4:data=_context13.sent;return _context13.abrupt("return",data);case 6:case"end":return _context13.stop();}}},_callee13);}));return function getNominativeById(_x13){return _ref13.apply(this,arguments);};}();var getGroupById=/*#__PURE__*/function(){var _ref14=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee14(id){var params,data;return regenerator_default.a.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:params=new URLSearchParams();params.append("id",id.toString());_context14.next=4;return getFetch(endpoints.groupsGet,params.toString());case 4:data=_context14.sent;return _context14.abrupt("return",data);case 6:case"end":return _context14.stop();}}},_callee14);}));return function getGroupById(_x14){return _ref14.apply(this,arguments);};}();var postNominative=/*#__PURE__*/function(){var _ref15=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee15(nominative){var data;return regenerator_default.a.wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return postFetch(endpoints.nominativesInsert,nominative);case 2:data=_context15.sent;return _context15.abrupt("return",data);case 4:case"end":return _context15.stop();}}},_callee15);}));return function postNominative(_x15){return _ref15.apply(this,arguments);};}();var postContact=/*#__PURE__*/function(){var _ref16=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee16(contact){var data;return regenerator_default.a.wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return postFetch(endpoints.contacts.insert,contact);case 2:data=_context16.sent;return _context16.abrupt("return",data);case 4:case"end":return _context16.stop();}}},_callee16);}));return function postContact(_x16){return _ref16.apply(this,arguments);};}();var postGroup=/*#__PURE__*/function(){var _ref17=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee17(group){var data;return regenerator_default.a.wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return postFetch(endpoints.groupsInsert,group);case 2:data=_context17.sent;return _context17.abrupt("return",data);case 4:case"end":return _context17.stop();}}},_callee17);}));return function postGroup(_x17){return _ref17.apply(this,arguments);};}();var putContact=/*#__PURE__*/function(){var _ref18=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee18(id,contact){var channelId,nominativeId,value,warning,modificaMinore,params,data,res;return regenerator_default.a.wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:channelId=contact.channelId,nominativeId=contact.nominativeId,value=contact.value,warning=contact.warning,modificaMinore=contact.modificaMinore;params=new URLSearchParams();params.append('id',id.toString());data={channelId:channelId,nominativeId:nominativeId,value:value,warning:warning,modificaMinore:modificaMinore};_context18.next=6;return putFetch(endpoints.contacts.update,params.toString(),data);case 6:res=_context18.sent;return _context18.abrupt("return",res);case 8:case"end":return _context18.stop();}}},_callee18);}));return function putContact(_x18,_x19){return _ref18.apply(this,arguments);};}();var putNominative=/*#__PURE__*/function(){var _ref19=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee19(id,nominative){var firstName,lastName,address,modificaMinore,params,data,res;return regenerator_default.a.wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:firstName=nominative.firstName,lastName=nominative.lastName,address=nominative.address,modificaMinore=nominative.modificaMinore;params=new URLSearchParams();params.append('id',id.toString());data={firstName:firstName,lastName:lastName,address:address,modificaMinore:modificaMinore};_context19.next=6;return putFetch(endpoints.nominativesUpdate,params.toString(),data);case 6:res=_context19.sent;return _context19.abrupt("return",res);case 8:case"end":return _context19.stop();}}},_callee19);}));return function putNominative(_x20,_x21){return _ref19.apply(this,arguments);};}();var setNominativeRole=/*#__PURE__*/function(){var _ref20=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee20(groupId,nominativeId,roleId){var params,data;return regenerator_default.a.wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:params=new URLSearchParams();params.append('id',groupId.toString());_context20.next=4;return postFetch(endpoints.groupNominatives.insert,{nominativeId:nominativeId,role:roleId},params.toString());case 4:data=_context20.sent;return _context20.abrupt("return",data);case 6:case"end":return _context20.stop();}}},_callee20);}));return function setNominativeRole(_x22,_x23,_x24){return _ref20.apply(this,arguments);};}();var setNominativesRole=/*#__PURE__*/function(){var _ref21=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee21(groupId,nominatives){var params,data;return regenerator_default.a.wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:params=new URLSearchParams();params.append('id',groupId.toString());_context21.next=4;return postFetch(endpoints.groupNominativesMulti.insert,nominatives,params.toString());case 4:data=_context21.sent;return _context21.abrupt("return",data);case 6:case"end":return _context21.stop();}}},_callee21);}));return function setNominativesRole(_x25,_x26){return _ref21.apply(this,arguments);};}();var setGroupsNominativeRole=/*#__PURE__*/function(){var _ref22=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee22(id,ids){var params,data;return regenerator_default.a.wrap(function _callee22$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context22.next=4;return postFetch(endpoints.nominativesGroupsMulti.insert,ids,params.toString());case 4:data=_context22.sent;return _context22.abrupt("return",data);case 6:case"end":return _context22.stop();}}},_callee22);}));return function setGroupsNominativeRole(_x27,_x28){return _ref22.apply(this,arguments);};}();var updateRolePermission=/*#__PURE__*/function(){var _ref23=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee23(roleId,permission,read,write){var obj,data;return regenerator_default.a.wrap(function _callee23$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:obj=[{permission:permission,read:read,write:write,roleId:roleId}];_context23.next=3;return putFetch(endpoints.rolePermission,"",obj);case 3:data=_context23.sent;return _context23.abrupt("return",data);case 5:case"end":return _context23.stop();}}},_callee23);}));return function updateRolePermission(_x29,_x30,_x31,_x32){return _ref23.apply(this,arguments);};}();var unsetNominativeRole=/*#__PURE__*/function(){var _ref24=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee24(groupId,nominativeId){var params,data;return regenerator_default.a.wrap(function _callee24$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:params=new URLSearchParams();params.append('id',groupId.toString());_context24.next=4;return deleteFetch(endpoints.groupNominatives.delete,params.toString(),{nominativeId:nominativeId});case 4:data=_context24.sent;return _context24.abrupt("return",data);case 6:case"end":return _context24.stop();}}},_callee24);}));return function unsetNominativeRole(_x33,_x34){return _ref24.apply(this,arguments);};}();var unsetNominativesRole=/*#__PURE__*/function(){var _ref25=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee25(groupId,nominativeIds){var params,data;return regenerator_default.a.wrap(function _callee25$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:params=new URLSearchParams();params.append('id',groupId.toString());_context25.next=4;return deleteFetch(endpoints.groupNominativesMulti.delete,params.toString(),nominativeIds);case 4:data=_context25.sent;return _context25.abrupt("return",data);case 6:case"end":return _context25.stop();}}},_callee25);}));return function unsetNominativesRole(_x35,_x36){return _ref25.apply(this,arguments);};}();var unsetGroupsRole=/*#__PURE__*/function(){var _ref26=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee26(groupId,nominatives){var params,data;return regenerator_default.a.wrap(function _callee26$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:params=new URLSearchParams();params.append('id',groupId.toString());_context26.next=4;return deleteFetch(endpoints.nominativesGroupsMulti.delete,params.toString(),nominatives);case 4:data=_context26.sent;return _context26.abrupt("return",data);case 6:case"end":return _context26.stop();}}},_callee26);}));return function unsetGroupsRole(_x37,_x38){return _ref26.apply(this,arguments);};}();var putGroup=/*#__PURE__*/function(){var _ref27=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee27(id,group){var params,data;return regenerator_default.a.wrap(function _callee27$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context27.next=4;return putFetch(endpoints.groupsUpdate,params.toString(),group);case 4:data=_context27.sent;return _context27.abrupt("return",data);case 6:case"end":return _context27.stop();}}},_callee27);}));return function putGroup(_x39,_x40){return _ref27.apply(this,arguments);};}();var deleteGroup=/*#__PURE__*/function(){var _ref28=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee28(id){var params,data;return regenerator_default.a.wrap(function _callee28$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context28.next=4;return deleteFetch(endpoints.groupsDelete,params.toString());case 4:data=_context28.sent;return _context28.abrupt("return",data);case 6:case"end":return _context28.stop();}}},_callee28);}));return function deleteGroup(_x41){return _ref28.apply(this,arguments);};}();var deleteNominative=/*#__PURE__*/function(){var _ref29=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee29(id){var params,data;return regenerator_default.a.wrap(function _callee29$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context29.next=4;return deleteFetch(endpoints.nominativesDelete,params.toString());case 4:data=_context29.sent;return _context29.abrupt("return",data);case 6:case"end":return _context29.stop();}}},_callee29);}));return function deleteNominative(_x42){return _ref29.apply(this,arguments);};}();var deleteNominatives=/*#__PURE__*/function(){var _ref30=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee30(ids){var data;return regenerator_default.a.wrap(function _callee30$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return deleteFetch(endpoints.nominativesMulti,"",ids);case 2:data=_context30.sent;return _context30.abrupt("return",data);case 4:case"end":return _context30.stop();}}},_callee30);}));return function deleteNominatives(_x43){return _ref30.apply(this,arguments);};}();var deleteGroups=/*#__PURE__*/function(){var _ref31=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee31(ids){var data;return regenerator_default.a.wrap(function _callee31$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_context31.next=2;return deleteFetch(endpoints.groupsMultiDelete,"",ids);case 2:data=_context31.sent;return _context31.abrupt("return",data);case 4:case"end":return _context31.stop();}}},_callee31);}));return function deleteGroups(_x44){return _ref31.apply(this,arguments);};}();var deleteContact=/*#__PURE__*/function(){var _ref32=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee32(id){var params,data;return regenerator_default.a.wrap(function _callee32$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context32.next=4;return deleteFetch(endpoints.contacts.delete,params.toString());case 4:data=_context32.sent;return _context32.abrupt("return",data);case 6:case"end":return _context32.stop();}}},_callee32);}));return function deleteContact(_x45){return _ref32.apply(this,arguments);};}();var deleteContacts=/*#__PURE__*/function(){var _ref33=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee33(ids){var data;return regenerator_default.a.wrap(function _callee33$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_context33.next=2;return deleteFetch(endpoints.contactsMulti,"",ids);case 2:data=_context33.sent;return _context33.abrupt("return",data);case 4:case"end":return _context33.stop();}}},_callee33);}));return function deleteContacts(_x46){return _ref33.apply(this,arguments);};}();var setSubgroup=/*#__PURE__*/function(){var _ref34=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee34(id,subgroupId){var params,data;return regenerator_default.a.wrap(function _callee34$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context34.next=4;return postFetch(endpoints.subgroups.insert,{subgroupId:subgroupId},params.toString());case 4:data=_context34.sent;return _context34.abrupt("return",data);case 6:case"end":return _context34.stop();}}},_callee34);}));return function setSubgroup(_x47,_x48){return _ref34.apply(this,arguments);};}();var setSubgroupMulti=/*#__PURE__*/function(){var _ref35=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee35(id,subgroupIds){var params,data;return regenerator_default.a.wrap(function _callee35$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context35.next=4;return postFetch(endpoints.subgroupsMulti.insert,subgroupIds,params.toString());case 4:data=_context35.sent;return _context35.abrupt("return",data);case 6:case"end":return _context35.stop();}}},_callee35);}));return function setSubgroupMulti(_x49,_x50){return _ref35.apply(this,arguments);};}();var setSupergroupMulti=/*#__PURE__*/function(){var _ref36=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee36(id,subgroupIds){var params,data;return regenerator_default.a.wrap(function _callee36$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context36.next=4;return postFetch(endpoints.supergroupsMulti.insert,subgroupIds,params.toString());case 4:data=_context36.sent;return _context36.abrupt("return",data);case 6:case"end":return _context36.stop();}}},_callee36);}));return function setSupergroupMulti(_x51,_x52){return _ref36.apply(this,arguments);};}();var removeSubgroup=/*#__PURE__*/function(){var _ref37=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee37(id,subgroupId){var params,data;return regenerator_default.a.wrap(function _callee37$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context37.next=4;return deleteFetch(endpoints.subgroups.delete,params.toString(),{subgroupId:subgroupId});case 4:data=_context37.sent;return _context37.abrupt("return",data);case 6:case"end":return _context37.stop();}}},_callee37);}));return function removeSubgroup(_x53,_x54){return _ref37.apply(this,arguments);};}();var removeSubgroups=/*#__PURE__*/function(){var _ref38=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee38(id,subgroupIds){var params,data;return regenerator_default.a.wrap(function _callee38$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context38.next=4;return deleteFetch(endpoints.subgroupsMulti.delete,params.toString(),subgroupIds);case 4:data=_context38.sent;return _context38.abrupt("return",data);case 6:case"end":return _context38.stop();}}},_callee38);}));return function removeSubgroups(_x55,_x56){return _ref38.apply(this,arguments);};}();var removeSupergroups=/*#__PURE__*/function(){var _ref39=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee39(id,subgroupIds){var params,data;return regenerator_default.a.wrap(function _callee39$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:params=new URLSearchParams();params.append('id',id.toString());_context39.next=4;return deleteFetch(endpoints.supergroupsMulti.delete,params.toString(),subgroupIds);case 4:data=_context39.sent;return _context39.abrupt("return",data);case 6:case"end":return _context39.stop();}}},_callee39);}));return function removeSupergroups(_x57,_x58){return _ref39.apply(this,arguments);};}();var client={groups:{setNominativeRole:setNominativeRole,setNominativesRole:setNominativesRole,setGroupsNominativeRole:setGroupsNominativeRole,unsetNominativeRole:unsetNominativeRole,unsetNominativesRole:unsetNominativesRole,unsetGroupsRole:unsetGroupsRole,setSubgroup:setSubgroup,setSubgroupMulti:setSubgroupMulti,setSupergroupMulti:setSupergroupMulti,removeSubgroup:removeSubgroup,removeSubgroups:removeSubgroups,removeSupergroups:removeSupergroups,all:getGroups,getById:getGroupById,create:postGroup,update:putGroup,delete:deleteGroup,deleteMulti:deleteGroups},nominatives:{all:getNominatives,getById:getNominativeById,create:postNominative,update:putNominative,delete:deleteNominative,deleteMulti:deleteNominatives},contacts:{create:postContact,delete:deleteContact,deleteMulti:deleteContacts,update:putContact},permission:{all:getPermissions},rolesPermission:{all:getRolesPermission,update:updateRolePermission},roles:{all:getRoles},channels:{all:getChannels},logs:{all:getLogs},loggedUser:getLoggedUser};/* harmony default export */ var resources = (endpoints);
// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
var assertThisInitialized = __webpack_require__(36);

// EXTERNAL MODULE: ./src/components/Modal/Modal.module.css
var Modal_module = __webpack_require__(67);
var Modal_module_default = /*#__PURE__*/__webpack_require__.n(Modal_module);

// EXTERNAL MODULE: ./src/common.module.css
var common_module = __webpack_require__(4);
var common_module_default = /*#__PURE__*/__webpack_require__.n(common_module);

// CONCATENATED MODULE: ./src/components/Modal/Modal.tsx
var Modal_Modal=/*#__PURE__*/function(_React$Component){Object(inherits["a" /* default */])(Modal,_React$Component);function Modal(props){var _this;Object(classCallCheck["a" /* default */])(this,Modal);_this=Object(possibleConstructorReturn["a" /* default */])(this,Object(getPrototypeOf["a" /* default */])(Modal).call(this,props));_this.state={show:false,title:'',content:null,tall:false,onAccept:undefined,onDismiss:undefined};_this._hide=function(){Modal.instance.setState({show:false,title:'',content:null,onAccept:function onAccept(){},onDismiss:function onDismiss(){}});};_this._show=function(title,content,onAccept,onDismiss){window.scrollTo(0,0);Modal.instance.setState({show:true,title:title,content:content,onAccept:onAccept,onDismiss:onDismiss});};_this._showTall=function(title,content,onAccept,onDismiss){window.scrollTo(0,0);Modal.instance.setState({show:true,tall:true,title:title,content:content,onAccept:onAccept,onDismiss:onDismiss});};_this.dismiss=function(){if(_this.state.onDismiss&&typeof _this.state.onDismiss==='function'){_this.state.onDismiss();}_this._hide();};Modal.instance=Object(assertThisInitialized["a" /* default */])(Object(assertThisInitialized["a" /* default */])(_this));return _this;}Object(createClass["a" /* default */])(Modal,[{key:"render",value:function render(){return this.state.show&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:Modal_module_default.a.backDrop,onClick:this._hide}),react_default.a.createElement("div",{className:this.state.tall?Modal_module_default.a.tallModal:Modal_module_default.a.modal},react_default.a.createElement("h1",{className:Modal_module_default.a.modalTitle},this.state.title),react_default.a.createElement("div",{className:Modal_module_default.a.modalContent},this.state.content),react_default.a.createElement("div",{className:Modal_module_default.a.modalActions},react_default.a.createElement("button",{className:common_module_default.a.button,onClick:this.dismiss},"Annulla"),typeof this.state.onAccept==='function'&&react_default.a.createElement("button",{className:common_module_default.a.button,onClick:this.state.onAccept},"Conferma"))));}}]);return Modal;}(react_default.a.Component);Modal_Modal.instance=void 0;Modal_Modal.show=function(title,content){var onAccept=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;var onDismiss=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;Modal_Modal.instance._show(title,content,onAccept,onDismiss);};Modal_Modal.showTall=function(title,content){var onAccept=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;var onDismiss=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;Modal_Modal.instance._showTall(title,content,onAccept,onDismiss);};Modal_Modal.hide=function(){Modal_Modal.instance._hide();};
// EXTERNAL MODULE: ./node_modules/formik/dist/formik.esm.js + 114 modules
var formik_esm = __webpack_require__(16);

// EXTERNAL MODULE: ./node_modules/yup/lib/index.js
var yup_lib = __webpack_require__(15);

// EXTERNAL MODULE: ./src/components/Panel/ContactDetailPanel/ContactDetailPanel.module.css
var ContactDetailPanel_module = __webpack_require__(28);
var ContactDetailPanel_module_default = /*#__PURE__*/__webpack_require__.n(ContactDetailPanel_module);

// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/CreateGreaterNominativeForm.tsx
var CreateGreaterNominativeForm_CreateGreaterNominativeForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(CreateGreaterNominativeForm,_Component);function CreateGreaterNominativeForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,CreateGreaterNominativeForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(CreateGreaterNominativeForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={loading:false,error:null,grouplist:null,groupFilter:'',timestamp:0};_this.generateValidationSchema=function(){return yup_lib["object"]().shape({firstName:yup_lib["string"]().required(),lastName:yup_lib["string"]().required(),//address: yup.string().required(),
contacts:yup_lib["array"](),groups:yup_lib["array"]()});};_this.hasGroup=function(){return _this.props.group;};_this.prefilledGroup=function(){return _this.props.group&&_this.props.group.name?_this.props.group.name:null;};_this.onSubmitNominative=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.nominatives.create(values);case 2:result=_context.sent;if(result.code===201){Object(lib["toast"])("Nominativo creato con successo",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.props.refetch();}else{Object(lib["toast"])("Creazione nominativo fallita, riprova",{type:lib["toast"].TYPE.ERROR});Modal_Modal.hide();}case 4:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleRole=function(values,setFieldValue){return function(event){setFieldValue('role',event.target.value);};};_this.filterGroups=function(setFieldValue){return(/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(e){var data;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setFieldValue('group',null);_this.setState({groupFilter:e.target.value});if(!(!e.target.value||e.target.value.length<2)){_context2.next=5;break;}_this.setState({grouplist:null});return _context2.abrupt("return");case 5:_context2.next=7;return client.groups.all(e.target.value,3,0);case 7:data=_context2.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({grouplist:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}case 9:case"end":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};_this.handleGroupSelection=function(group,setFieldValue){return function(event){setFieldValue('group',group.id);_this.setState({groupFilter:group.name,grouplist:null});};};return _this;}Object(createClass["a" /* default */])(CreateGreaterNominativeForm,[{key:"render",value:function render(){var _this2=this;return react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{firstName:'',lastName:'',role:null,group:this.hasGroup()?this.props.group.id:null,specificaRuolo:'',contacts:[],address:'',email:'',telefono:'',groups:[]},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitNominative},function(_ref3){var values=_ref3.values,setFieldValue=_ref3.setFieldValue,isValid=_ref3.isValid;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("table",{style:{width:'100%'}},react_default.a.createElement("tr",null,react_default.a.createElement("td",null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Nome"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"firstName"})))),react_default.a.createElement("td",null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Cognome"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"lastName"}))))),react_default.a.createElement("tr",null,react_default.a.createElement("td",{colSpan:2},react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Indirizzo"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"address"}))))),react_default.a.createElement("tr",null,react_default.a.createElement("td",{colSpan:2},_this2.hasGroup()&&react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Gruppo"),react_default.a.createElement("span",null,react_default.a.createElement("b",null,_this2.prefilledGroup())))),!_this2.hasGroup()&&react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Gruppo"),react_default.a.createElement("input",{value:_this2.state.groupFilter,type:"text",onChange:_this2.filterGroups(setFieldValue)}),_this2.state.grouplist&&react_default.a.createElement("ul",{className:common_module_default.a.list,style:{height:'120px'}},_this2.state.grouplist&&_this2.state.grouplist.map(function(el){return react_default.a.createElement(react_default.a.Fragment,{key:el.id},el.id>=0&&react_default.a.createElement("li",{style:{display:'flex',alignItems:'center',padding:'.5rem 0'}},react_default.a.createElement("div",{style:{width:'90%',height:'16px',cursor:'pointer'},onClick:_this2.handleGroupSelection(el,setFieldValue)},el.name)));})))))),react_default.a.createElement("tr",null,react_default.a.createElement("td",null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Ruolo"),react_default.a.createElement("select",{onChange:_this2.handleRole(values,setFieldValue),defaultValue:"",style:{marginLeft:'auto'}},react_default.a.createElement("option",{value:""},"---"),_this2.props.roles&&_this2.props.roles.map(function(role){return react_default.a.createElement("option",{key:role.id,value:role.id},role.name);}))))),react_default.a.createElement("td",null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Specifica"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"specificaRuolo"}))))),react_default.a.createElement("tr",null,react_default.a.createElement("td",null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Email"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"email"})))),react_default.a.createElement("td",null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Telefoni"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"telefono"})))))),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Crea "));}));}}]);return CreateGreaterNominativeForm;}(react["Component"]);CreateGreaterNominativeForm_CreateGreaterNominativeForm.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/ContactPanel/MoveNominativeForm.tsx
var MoveNominativeForm_MoveNominativeForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(MoveNominativeForm,_Component);function MoveNominativeForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,MoveNominativeForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(MoveNominativeForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={selectedGroupId:undefined};_this.submitChanges=function(values){client.groups.setNominativeRole(_this.state.selectedGroupId,values.nominativeId,values.roleId);};_this.handleChange=function(setFieldValue,id){return function(event){setFieldValue('nominatives',id);};};return _this;}Object(createClass["a" /* default */])(MoveNominativeForm,[{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:''},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{nominatives:[]},onSubmit:this.submitChanges},function(_ref){var values=_ref.values,isValid=_ref.isValid,setFieldValue=_ref.setFieldValue;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("ul",null,_this2.props.nominatives.map(function(el,idx){react_default.a.createElement("li",null,el.firstName," ",el.lastName,react_default.a.createElement("input",{hidden:true,value:el.id}),react_default.a.createElement("select",{name:"roleId",onChange:_this2.handleChange(setFieldValue,el.id)},_this2.context.roles.map(function(role){react_default.a.createElement("option",{value:role.id},role.name);})));})),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Salva Modifiche "));})));}}]);return MoveNominativeForm;}(react["Component"]);MoveNominativeForm_MoveNominativeForm.contextType=PanelContext;
// CONCATENATED MODULE: ./src/utils.ts
var debounced=function debounced(func,wait){var timeout;return function(args){args.persist();if(timeout){clearTimeout(timeout);}timeout=setTimeout(function(){func(args);},wait);};};var genID=function genID(){var array=new Uint32Array(8);window.crypto.getRandomValues(array);var str='';for(var i=0;i<array.length;i++){str+=(i<2||i>5?'':'-')+array[i].toString(16).slice(-4);}return str;};var getResId=function getResId(panels,id){var panel=panels.filter(function(panel){return panel.id===id;});if(panel[0]){return panel[0].resId;}else{return undefined;}};var getChannelName=function getChannelName(channels,channelId){var channel=channels.filter(function(channel){return channel.id===channelId;});if(channel[0]){return channel[0].name;}else{return'';}};
// EXTERNAL MODULE: ./node_modules/react-dnd/dist/esm/common/DndProvider.js
var DndProvider = __webpack_require__(461);

// EXTERNAL MODULE: ./node_modules/react-dnd-html5-backend/dist/esm/index.js + 12 modules
var esm = __webpack_require__(66);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(130);

// EXTERNAL MODULE: ./node_modules/react-dnd/dist/esm/common/DndContext.js + 30 modules
var DndContext = __webpack_require__(100);

// EXTERNAL MODULE: ./node_modules/react-dnd/dist/esm/hooks/useDrag.js + 3 modules
var useDrag = __webpack_require__(462);

// CONCATENATED MODULE: ./src/components/DragDrop/DraggableComponent.tsx
function DraggableComponent(props){var dndcontext=Object(react["useContext"])(DndContext["a" /* DndContext */]);//console.log(dndcontext)
if(dndcontext.dragDropManager===undefined){console.log('No context, no DnD');return react_default.a.createElement(react_default.a.Fragment,null,props.children);}var _useDrag=Object(useDrag["a" /* useDrag */])({item:{data:props.data,type:props.type}}),_useDrag2=Object(slicedToArray["a" /* default */])(_useDrag,2),collectedProps=_useDrag2[0],drag=_useDrag2[1];//console.log("DraggableComponent")
//console.log(props)
return react_default.a.createElement("span",{ref:drag},props.children);}
// CONCATENATED MODULE: ./src/components/Panel/ContactPanel/ContactPanel.tsx
var ContactPanel_ContactPanel=/*#__PURE__*/function(_PureComponent){Object(inherits["a" /* default */])(ContactPanel,_PureComponent);function ContactPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,ContactPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(ContactPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={loading:true,data:[],filter:'',error:null,timestamp:0,selected:[],total:0};_this.gridApi=null;_this.onGridReady=function(params){_this.gridApi=params.api;_this.gridApi.sizeColumnsToFit();};_this.onResize=function(){if(_this.gridApi){_this.gridApi.sizeColumnsToFit();}};_this.handleNewNominative=function(){/* Modal.show('Crea Nominativo', <CreateNominativeForm refetch={this.refetch} />, null, null)*/Modal_Modal.showTall('Crea Nominativo',react_default.a.createElement(CreateGreaterNominativeForm_CreateGreaterNominativeForm,{refetch:_this.refetch,roles:_this.context.roles}));};_this.handleNominativeClick=function(id){return function(){return _this.context.onSelect(PanelType.CONTACT_DETAILS,_this.props.id,id,_this.state);};};_this.handleNominativeRemoval=function(id){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var response;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.nominatives.delete(id);case 2:response=_context.sent;if(response.code===204){Object(lib["toast"])('Nominativo cancellato con successo',{type:lib["toast"].TYPE.SUCCESS});_this.refetch();Modal_Modal.hide();}else{Object(lib["toast"])('Cancellazione fallita, riprova',{type:lib["toast"].TYPE.ERROR});}case 4:case"end":return _context.stop();}}},_callee);})));};_this.handleNominativesRemoval=function(nominatives){return(/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(event){var ids,response;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:ids=Array.isArray(nominatives)?nominatives.map(function(_ref3){var id=_ref3.id;return{id:id};}):[].concat({"id":nominatives});_context2.next=3;return client.nominatives.deleteMulti(ids);case 3:response=_context2.sent;if(response.code>=200&&response.code<300){Object(lib["toast"])('Nominativi eliminati',{type:lib["toast"].TYPE.SUCCESS});_this.setState({selected:[]},function(){return _this.refetch();});}else{Object(lib["toast"])('Eliminazione fallita, riprova',{type:lib["toast"].TYPE.ERROR});}Modal_Modal.hide();case 6:case"end":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}());};_this.handleRemoval=function(nominative){return function(){Modal_Modal.show('Eliminazione nominativo',react_default.a.createElement("div",{className:"leftAligned"},"Conferma la rimozione del nominativo:",react_default.a.createElement("br",null),react_default.a.createElement("div",{className:common_module_default.a.modalList},react_default.a.createElement("b",null,"- ",nominative.firstName," ",nominative.lastName)),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),onClick:_this.handleNominativesRemoval(nominative.id)},"ELIMINA")));};};_this.handleMultiRemoval=function(nominatives){return function(){Modal_Modal.show('Eliminazione nominativi',react_default.a.createElement("div",{className:"leftAligned ".concat(common_module_default.a.listedContent)},"Conferma la rimozione dei nominativi: ",react_default.a.createElement("br",null),react_default.a.createElement("div",{className:common_module_default.a.modalList},nominatives.map(function(nominative){return react_default.a.createElement("b",{key:nominative.id,className:common_module_default.a.modalItem}," - ",nominative.firstName," ",nominative.lastName,react_default.a.createElement("br",null));})),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),onClick:_this.handleNominativesRemoval(nominatives)},"ELIMINA")));};};_this.refetch=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var data;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return client.nominatives.all(_this.state.filter,100000,0);case 3:data=_context3.sent;if(!(data.timestamp<_this.state.timestamp)){_context3.next=6;break;}return _context3.abrupt("return");case 6:_this.setState({loading:false,data:data.data,error:null,timestamp:data.timestamp});_this.context.setCache(_this.props.id,'contactData',data.data);_context3.next=15;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](0);console.error(_context3.t0);_this.setState({loading:false,data:[],error:'API Error'});_this.context.setCache(_this.props.id,'contactData',null);case 15:case"end":return _context3.stop();}}},_callee3,null,[[0,10]]);}));_this.onSelectionChanged=function(){if(_this.gridApi){_this.setState(function(p){return Object(objectSpread["a" /* default */])({},p,{selected:_this.gridApi.getSelectedRows()});});}};_this.handleMove=function(){Modal_Modal.show('Sposta nominativo/i',react_default.a.createElement(MoveNominativeForm_MoveNominativeForm,{nominatives:_this.state.selected}));};_this.filterData=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(e){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.context.setCache(_this.props.id,'contactFilter',e.target.value);_this.setState({filter:e.target.value});_this.refetch();case 3:case"end":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref5.apply(this,arguments);};}();_this.colDefs=[{headerName:"",checkboxSelection:true,width:20},{headerName:"Nominativo",cellRendererFramework:function cellRendererFramework(_ref6){var data=_ref6.data;var gruppi='';var k;if(data&&data.groups&&data.groups.length>0){for(k=0;k<data.groups.length;k++){if(k>0)gruppi+=', ';gruppi+=data.groups[k].name;}}return react_default.a.createElement(DndProvider["a" /* DndProvider */],{backend:esm["a" /* default */]},react_default.a.createElement(DraggableComponent,{type:"CONTACT",data:data.id},react_default.a.createElement("div",{style:{'lineHeight':'23px'}},data&&data.firstName," ",data&&data.lastName," ",data&&!data.firstName&&!data.lastName&&'Senza nome'," ",react_default.a.createElement("br",null),gruppi)));}},{headerName:"Contatti",width:55,cellRenderer:function cellRenderer(_ref7){var data=_ref7.data;return"".concat(data&&data.contacts&&data.contacts.length);}},{headerName:"Ultima Modifica",width:50,cellRenderer:function cellRenderer(_ref8){var data=_ref8.data;var dat=new Date();if(data&&data.lastEdit){dat.setTime(data.lastEdit);return dat.toLocaleString('it-IT');}return'';}},{headerName:"Azioni",width:100,suppressSizeToFit:true,cellRendererFramework:function cellRendererFramework(_ref9){var data=_ref9.data;return react_default.a.createElement("div",{className:common_module_default.a.tabActions},react_default.a.createElement("div",{style:{cursor:'pointer'},onClick:_this.handleNominativeClick(data.id)}," \uD83D\uDD0D "),react_default.a.createElement("div",{style:{cursor:'pointer'},onClick:_this.context.loggedUser&&_this.context.loggedUser.write&&_this.handleRemoval(data)}," \u274C "));}}];return _this;}Object(createClass["a" /* default */])(ContactPanel,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var cacheData;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:window.addEventListener('resize',this.onResize,{passive:true});cacheData=this.context.getCache(this.props.id,'contactData');if(cacheData)this.setState({data:cacheData,loading:false});else{try{this.refetch();}catch(err){console.error(err);this.setState({loading:false,data:[],error:'API Error'});}}case 3:case"end":return _context5.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener('resize',this.onResize);}},{key:"render",value:function render(){var _this$state=this.state,loading=_this$state.loading,error=_this$state.error,selected=_this$state.selected;var filt=this.context.getCache(this.props.id,'contactFilter');return react_default.a.createElement(react_default.a.Fragment,null,loading&&!this.context.loggedUser&&react_default.a.createElement(Loader_Loader,null),!loading&&!error&&this.context.loggedUser&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:common_module_default.a.buttonRow},react_default.a.createElement("button",{className:common_module_default.a.button,disabled:this.context.loggedUser&&!this.context.loggedUser.write,onClick:this.handleNewNominative},"Crea Nominativo"),selected&&selected.length>=1&&react_default.a.createElement("button",{className:common_module_default.a.button,style:{marginLeft:'1rem'},disabled:this.context.loggedUser&&!this.context.loggedUser.write,onClick:this.handleMultiRemoval(selected)},"Elimina Nominativi")),react_default.a.createElement("label",{htmlFor:"filtro"},"Filtra:"),react_default.a.createElement("input",{id:"filtro",defaultValue:filt?filt:"",type:"text",onChange:debounced(this.filterData,350)}),react_default.a.createElement("div",{className:"ag-theme-material"},react_default.a.createElement(main["AgGridReact"],{columnDefs:this.colDefs,rowSelection:"multiple",suppressRowClickSelection:true,rowData:this.state.data,onSelectionChanged:this.onSelectionChanged,pagination:true,paginationPageSize:20,onFirstDataRendered:this.onGridReady}))),!loading&&error&&react_default.a.createElement("div",{className:Loader_module_default.a.loader},error));}}]);return ContactPanel;}(react["PureComponent"]);ContactPanel_ContactPanel.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/ContactPanel/index.ts

// EXTERNAL MODULE: ./src/components/Panel/GroupDetailPanel/GroupDetailPanel.module.css
var GroupDetailPanel_module = __webpack_require__(31);
var GroupDetailPanel_module_default = /*#__PURE__*/__webpack_require__.n(GroupDetailPanel_module);

// CONCATENATED MODULE: ./src/components/Panel/GroupDetailPanel/CreateGroupForm.tsx
var CreateGroupForm_CreateGroupForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(CreateGroupForm,_Component);function CreateGroupForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,CreateGroupForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(CreateGroupForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.generateValidationSchema=function(){return yup_lib["object"]().shape({name:yup_lib["string"]().required()});};_this.onSubmitGroup=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.groups.create(values);case 2:result=_context.sent;if(result.code===201){Object(lib["toast"])("Gruppo creato con successo",{type:lib["toast"].TYPE.SUCCESS});_this.props.refetch();Modal_Modal.hide();}else{Object(lib["toast"])("Creazione gruppo fallita, riprova",{type:lib["toast"].TYPE.ERROR});}case 4:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}Object(createClass["a" /* default */])(CreateGroupForm,[{key:"render",value:function render(){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{name:''},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitGroup},function(_ref2){var isValid=_ref2.isValid;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Nome"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"name"}))),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Crea "));})));}}]);return CreateGroupForm;}(react["Component"]);CreateGroupForm_CreateGroupForm.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/GroupPanel/CustomGroupRenderer.tsx
var CustomGroupRenderer_CustomGroupRenderer=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(CustomGroupRenderer,_Component);function CustomGroupRenderer(props){Object(classCallCheck["a" /* default */])(this,CustomGroupRenderer);return Object(possibleConstructorReturn["a" /* default */])(this,Object(getPrototypeOf["a" /* default */])(CustomGroupRenderer).call(this,props));}Object(createClass["a" /* default */])(CustomGroupRenderer,[{key:"render",value:function render(){console.log(this.props);var data=this.props.node.data;return react_default.a.createElement(DndProvider["a" /* DndProvider */],{backend:esm["a" /* default */]},react_default.a.createElement(DraggableComponent,{type:"GROUP",data:data.id},react_default.a.createElement("span",null,"\uD83D\uDCC2 ",data.name," - (",data.subgroupsCount," Sottogruppi) - (",data.nominativeCount," Nominativi)")));}}]);return CustomGroupRenderer;}(react["Component"]);;
// CONCATENATED MODULE: ./src/components/Panel/GroupPanel/GroupPanel.tsx
var GroupPanel_GroupPanel=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(GroupPanel,_Component);function GroupPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,GroupPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(GroupPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={selected:[],loading:false,filter:'',data:[],timestamp:0,error:null,total:0/*dataSource: IDatasource = {
    getRows: (params: IGetRowsParams) => {

      // Use startRow and endRow for sending pagination to Backend
      // params.startRow : Start Page
      // params.endRow : End Page

      const response = await client.groups.all(this.state.filter,params.endRow-params.startRow,params.startRow);
        params.successCallback(
          response.data, response.total
        );

   
    }
  }*/};_this.gridApi=null;_this.onGridReady=function(params){_this.gridApi=params.api;_this.gridApi.sizeColumnsToFit();};_this.onResize=function(){if(_this.gridApi){_this.gridApi.sizeColumnsToFit();}};_this.getNodeChildDetails=function(rowItem){if(rowItem.subgroupsCount){return{group:true,children:rowItem.subgroups,key:rowItem.id};}else{return{group:false};}};_this.refetch=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _ref2,data,timestamp;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return client.groups.all(_this.state.filter);case 3:_ref2=_context.sent;data=_ref2.data;timestamp=_ref2.timestamp;console.log('Compare TS: '+timestamp+' and '+_this.state.timestamp);if(!(timestamp<_this.state.timestamp)){_context.next=9;break;}return _context.abrupt("return");case 9:_this.setState({loading:false,data:data,error:null,timestamp:timestamp});_this.context.setCache(_this.props.id,'groupData',data);_context.next=18;break;case 13:_context.prev=13;_context.t0=_context["catch"](0);console.error(_context.t0);_this.setState({loading:false,data:[],error:'API Error'});_this.context.setCache(_this.props.id,'groupData',null);case 18:case"end":return _context.stop();}}},_callee,null,[[0,13]]);}));_this.handleGroupDeletion=function(id){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var response;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client.groups.delete(id);case 2:response=_context2.sent;if(response.code===204){Object(lib["toast"])('Gruppo eliminato',{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])('Eliminazione fallita, riprova',{type:lib["toast"].TYPE.ERROR});}case 4:case"end":return _context2.stop();}}},_callee2);})));};_this.onRemoval=function(group){return function(){Modal_Modal.show('Elimina Gruppo',react_default.a.createElement("div",null,"Procedere con l'eliminazione del Gruppo:",react_default.a.createElement("br",null),react_default.a.createElement("b",null,group.name),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),onClick:_this.handleGroupDeletion(group.id)},"ELIMINA")));};};_this.handleGroupDetail=function(id){return function(){_this.context.onSelect(PanelType.GROUP_DETAILS,_this.props.id,id,_this.state);};};_this.handleNewGroup=function(){Modal_Modal.show('Crea Gruppo',react_default.a.createElement(CreateGroupForm_CreateGroupForm,{refetch:_this.refetch}));};_this.onSelectionChanged=function(){if(_this.gridApi){var selected=_this.gridApi.getSelectedRows();_this.setState(function(p){return Object(objectSpread["a" /* default */])({},p,{selected:selected});});}};_this.handleGroupsRemoval=function(groups){return(/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(event){var ids,response;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ids=groups.map(function(_ref5){var id=_ref5.id;return{id:id};});_context3.next=3;return client.groups.deleteMulti(ids);case 3:response=_context3.sent;if(response.code===204){Object(lib["toast"])('Gruppi eliminati',{type:lib["toast"].TYPE.SUCCESS});_this.setState({selected:[]},function(){return _this.refetch();});}else{Object(lib["toast"])('Eliminazione fallita, riprova',{type:lib["toast"].TYPE.ERROR});}Modal_Modal.hide();case 6:case"end":return _context3.stop();}}},_callee3);}));return function(_x){return _ref4.apply(this,arguments);};}());};_this.handleMultiRemoval=function(groups){return function(){Modal_Modal.show('Elimina Gruppi',react_default.a.createElement("div",{style:{textAlign:'left'}},"Eliminare i gruppi: ",react_default.a.createElement("br",null),groups.map(function(group){return react_default.a.createElement("b",{key:group.id}," - ",group.name," ",react_default.a.createElement("br",null));}),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),onClick:_this.handleGroupsRemoval(groups)},"ELIMINA")));};};_this.filterData=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(e){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.context.setCache(_this.props.id,'groupFilter',e.target.value);_this.setState({filter:e.target.value});_this.refetch();case 3:case"end":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref6.apply(this,arguments);};}();return _this;}Object(createClass["a" /* default */])(GroupPanel,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var cacheData;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:window.addEventListener('resize',this.onResize,{passive:true});cacheData=this.context.getCache(this.props.id,'groupData');if(!cacheData){try{this.setState({loading:true});this.refetch();}catch(err){console.error(err);this.setState({loading:false,data:[],error:'API Error',total:0});}}else{this.setState({data:cacheData});}case 3:case"end":return _context5.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener('resize',this.onResize);}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,error=_this$state.error,selected=_this$state.selected;console.log(this.context.loggedUser);var filt=this.context.getCache(this.props.id,'groupFilter');return react_default.a.createElement(react_default.a.Fragment,null,loading&&!this.context.loggedUser&&react_default.a.createElement(Loader_Loader,null),!loading&&!error&&this.context.loggedUser&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{style:{alignItems:'center'}},this.context.loggedUser.write&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("button",{style:{marginLeft:'.5rem',marginBottom:'.5rem'},className:common_module_default.a.button,onClick:this.handleNewGroup},"Crea Gruppo"),selected&&selected.length>1&&react_default.a.createElement("button",{className:common_module_default.a.button,style:{marginLeft:'1rem',marginBottom:'.5rem'},onClick:this.handleMultiRemoval(selected)},"Elimina Gruppi"))),react_default.a.createElement("label",{htmlFor:"filtro"},"Filtra:"),react_default.a.createElement("input",{defaultValue:filt?filt:"",name:"filtro-gruppo",id:"filtro",type:"text",onChange:debounced(this.filterData,350)}),react_default.a.createElement("div",{className:"ag-theme-material",style:{flex:1}},react_default.a.createElement(main["AgGridReact"],Object.assign({},this.props,{columnDefs:[{checkboxSelection:this.context.loggedUser.write,headerName:"Nome Gruppo",field:"name",cellRenderer:"agGroupCellRenderer",cellRendererParams:{suppressCount:true,innerRendererFramework:CustomGroupRenderer_CustomGroupRenderer},cellStyle:{'textOverflow':'clip'},groupId:"id"//valueFormatter: ({data, value, node}) => {
//  if(data.id !== -1) {
//    return `ðŸ“‚ ${data.name} - (${data.subgroupsCount} Sottogruppi) - (${data.nominativeCount} Nominativi)`
//  } else {
//    node.setRowSelectable(false)
//    return `ðŸŒŸ ${data.name} - (${data.nominativeCount} Nominativi)`
//  }
//},
},{headerName:'Azioni',width:110,suppressSizeToFit:true,suppressAutoSize:true,cellRendererFramework:function cellRendererFramework(_ref7){var data=_ref7.data;return react_default.a.createElement("div",{style:{display:'flex',justifyContent:'space-between'}},react_default.a.createElement("div",{style:{cursor:'pointer'},onClick:_this2.handleGroupDetail(data.id)}," \uD83D\uDD0D"),data.id!==-1&&_this2.context.loggedUser.write&&react_default.a.createElement("div",{style:{cursor:'pointer'},onClick:_this2.onRemoval(data)},"\u274C"));}}],rowSelection:"multiple",rowData:this.state.data,pagination:true,paginationPageSize:10,onSelectionChanged:this.onSelectionChanged,onFirstDataRendered:this.onGridReady,getNodeChildDetails:this.getNodeChildDetails})))),!loading&&error&&react_default.a.createElement("div",null,error));}}]);return GroupPanel;}(react["Component"]);GroupPanel_GroupPanel.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/GroupPanel/index.ts

// CONCATENATED MODULE: ./src/components/Tooltip/Tooltip.tsx
var Tooltip_TableTooltip=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(TableTooltip,_Component);function TableTooltip(){Object(classCallCheck["a" /* default */])(this,TableTooltip);return Object(possibleConstructorReturn["a" /* default */])(this,Object(getPrototypeOf["a" /* default */])(TableTooltip).apply(this,arguments));}Object(createClass["a" /* default */])(TableTooltip,[{key:"componentDidMount",value:function componentDidMount(){this.props.reactContainer.className='ag-tooltip';}},{key:"render",value:function render(){var data=this.props.api.getRowNode(this.props.rowIndex).data;return react_default.a.createElement("div",null,react_default.a.createElement("p",null,react_default.a.createElement("span",null,"[".concat(data&&data.table,"]:"))),react_default.a.createElement("p",null,react_default.a.createElement("span",null,"".concat(data&&data.description))));}}]);return TableTooltip;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Tooltip/index.ts

// CONCATENATED MODULE: ./src/components/Panel/LogPanel/LogPanel.tsx
var LogPanel_LogPanel=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(LogPanel,_Component);function LogPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,LogPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(LogPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:false,data:[],error:null};_this.gridApi=null;_this.onGridReady=function(params){_this.gridApi=params.api;_this.gridApi.sizeColumnsToFit();};_this.onResize=function(){if(_this.gridApi){_this.gridApi.sizeColumnsToFit();}};return _this;}Object(createClass["a" /* default */])(LogPanel,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _ref,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.addEventListener('resize',this.onResize,{passive:true});_context.prev=1;this.setState({loading:true});_context.next=5;return client.logs.all('',1000,0);case 5:_ref=_context.sent;data=_ref.data;this.setState({loading:false,data:data,error:null});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context["catch"](1);console.error(_context.t0);this.setState({loading:false,data:[],error:'API Error'});case 14:case"end":return _context.stop();}}},_callee,this,[[1,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener('resize',this.onResize);}},{key:"render",value:function render(){var _this$state=this.state,loading=_this$state.loading,error=_this$state.error;return react_default.a.createElement(react_default.a.Fragment,null,loading&&react_default.a.createElement(Loader_Loader,null),!loading&&!error&&react_default.a.createElement("div",{className:"ag-theme-material",style:{height:'100%'}},react_default.a.createElement(main["AgGridReact"],{columnDefs:[{headerName:"Chi",width:55,field:"editUser",tooltipField:"editUser",sortable:true,filter:true,cellRenderer:function cellRenderer(_ref2){var value=_ref2.value;return"".concat(value&&value.firstName," ").concat(value&&value.lastName);}},{headerName:"Quando",width:55,field:"editDate",sortable:true,cellRenderer:function cellRenderer(_ref3){var value=_ref3.value;var d=new Date();d.setTime(value);return d.toLocaleString('it-IT');}},{headerName:"Cosa",tooltipComponent:"tooltip",tooltipField:"description",filter:true,sortable:true,cellRenderer:function cellRenderer(_ref4){var data=_ref4.data;return"[".concat(data&&data.table,"]: ").concat(data&&data.description);}},{headerName:"Azione",width:55,sortable:true,field:"operation"}],rowData:this.state.data,pagination:true,paginationPageSize:10,onFirstDataRendered:this.onGridReady,frameworkComponents:{tooltip:Tooltip_TableTooltip}})),!loading&&error&&react_default.a.createElement("div",null,error));}}]);return LogPanel;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Panel/LogPanel/index.ts

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(23);

// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/DetailForm.tsx
var DetailForm_DetailForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(DetailForm,_Component);function DetailForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,DetailForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(DetailForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.generateValidationSchema=function(){return yup_lib["object"]().shape({firstName:yup_lib["string"]().required(),lastName:yup_lib["string"]().required(),address:yup_lib["string"](),modificaMinore:yup_lib["boolean"]()});};_this.onSubmitNominative=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.nominatives.update(_this.props.nominative.id,values);case 2:result=_context.sent;if(!(result.code===204)){_context.next=10;break;}_context.next=6;return _this.props.refetch();case 6:Modal_Modal.hide();Object(lib["toast"])("Nominativo modificato",{type:lib["toast"].TYPE.SUCCESS});_context.next=13;break;case 10:_context.next=12;return _this.props.refetch();case 12:Object(lib["toast"])("Modifica fallita, riprova",{type:lib["toast"].TYPE.ERROR});case 13:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onCheckChange2=function(setFieldValue,value){return function(event){setFieldValue('modificaMinore',event.target.value?true:false);};};return _this;}Object(createClass["a" /* default */])(DetailForm,[{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{firstName:this.props.nominative.firstName,lastName:this.props.nominative.lastName,contacts:this.props.nominative.contacts,address:this.props.nominative.address,groups:this.props.nominative.groups,group:null,role:null,specificaRuolo:'',modificaMinore:false},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitNominative},function(_ref2){var isValid=_ref2.isValid,setFieldValue=_ref2.setFieldValue,values=_ref2.values;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Nome"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"firstName"}))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Cognome"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"lastName"}))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Indirizzo"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"address"}))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Modifica minore"),react_default.a.createElement("input",{type:"checkbox",defaultChecked:false,onChange:_this2.onCheckChange2(setFieldValue,values.modificaMinore)}))),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Modifica "));})));}}]);return DetailForm;}(react["Component"]);DetailForm_DetailForm.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/AddContactForm.tsx
var AddContactForm_AddContactForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(AddContactForm,_Component);function AddContactForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,AddContactForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(AddContactForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.generateValidationSchema=function(){return yup_lib["object"]().shape({channelId:yup_lib["number"]().required(),value:yup_lib["string"]().required(),warn:yup_lib["boolean"]()});};_this.onSubmitContact=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.contacts.create(Object(objectSpread["a" /* default */])({},values,{nominativeId:_this.props.nominative.id}));case 2:result=_context.sent;if(!(result.code===201)){_context.next=10;break;}_context.next=6;return _this.props.refetch();case 6:Object(lib["toast"])("Update avvenuto con successo",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_context.next=11;break;case 10:Object(lib["toast"])("Update fallito, riprova",{type:lib["toast"].TYPE.ERROR});case 11:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onChange=function(setFieldValue){return function(event){setFieldValue('channelId',event.target.value);};};_this.onCheckChange=function(setFieldValue,value){return function(event){setFieldValue('warning',event.target.checked);};};_this.renderOptions=function(channels){var options=channels.map(function(channel){return react_default.a.createElement("option",{key:channel.id,value:channel.id},channel.name);});return options;};return _this;}Object(createClass["a" /* default */])(AddContactForm,[{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{warning:true,value:'',channelId:null},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitContact},function(_ref2){var isValid=_ref2.isValid,setFieldValue=_ref2.setFieldValue,values=_ref2.values;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Canale"),react_default.a.createElement("select",{name:"channelId",onChange:_this2.onChange(setFieldValue)},react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("option",{value:undefined}," -- SELEZIONA CANALE -- "),_this2.renderOptions(_this2.props.channels))))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Valore"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"value"}))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Allertamento"),react_default.a.createElement("input",{type:"checkbox",defaultChecked:values.warning,onChange:_this2.onCheckChange(setFieldValue,values.warning)}))),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Crea "));})));}}]);return AddContactForm;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/ModifyContactForm.tsx
var ModifyContactForm_ModifyContactForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(ModifyContactForm,_Component);function ModifyContactForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,ModifyContactForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(ModifyContactForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.generateValidationSchema=function(){return yup_lib["object"]().shape({channelId:yup_lib["number"]().required(),value:yup_lib["string"]().required(),warning:yup_lib["boolean"](),modificaMinore:yup_lib["boolean"]()});};_this.onSubmitContact=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.contacts.update(_this.props.contact.id,Object(objectSpread["a" /* default */])({},values,{nominativeId:_this.props.nominative.id}));case 2:result=_context.sent;if(!(result.code===204)){_context.next=10;break;}_context.next=6;return _this.props.refetch();case 6:Modal_Modal.hide();Object(lib["toast"])("Update avvenuto con successo",{type:lib["toast"].TYPE.SUCCESS});_context.next=11;break;case 10:Object(lib["toast"])("Update fallito, riprova",{type:lib["toast"].TYPE.ERROR});case 11:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.onChange=function(setFieldValue){return function(event){setFieldValue('channelId',event.target.value);};};_this.renderOptions=function(channels){var options=channels.map(function(channel){return react_default.a.createElement("option",{key:channel.id,value:channel.id},channel.name);});return options;};_this.onCheckChange=function(setFieldValue,setFieldTouched,value){return function(event){setFieldValue('warning',event.target.checked?true:false,true);setFieldTouched('warning',true,true);};};_this.onCheckChange2=function(setFieldValue,setFieldTouched,value){return function(event){setFieldValue('modificaMinore',event.target.checked?true:false,true);setFieldTouched('modificaMinore',true,true);};};return _this;}Object(createClass["a" /* default */])(ModifyContactForm,[{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{warning:this.props.contact.warning,value:this.props.contact.value,channelId:this.props.contact.channelId,modificaMinore:false},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitContact},function(_ref2){var isValid=_ref2.isValid,setFieldValue=_ref2.setFieldValue,setFieldTouched=_ref2.setFieldTouched,dirty=_ref2.dirty,values=_ref2.values;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Canale"),react_default.a.createElement("select",{style:{width:'100%'},name:"channelId",onChange:_this2.onChange(setFieldValue),defaultValue:_this2.props.contact.channelId},react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("option",{value:undefined}," -- SELEZIONA CANALE -- "),_this2.renderOptions(_this2.props.channels))))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Valore"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"value"}))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Allertamento"),react_default.a.createElement("input",{type:"checkbox",defaultChecked:values.warning,onChange:_this2.onCheckChange(setFieldValue,setFieldTouched,values.warning)}))),react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Modifica minore"),react_default.a.createElement("input",{type:"checkbox",defaultChecked:false,onChange:_this2.onCheckChange2(setFieldValue,setFieldTouched,values.modificaMinore)}))),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid||!dirty,type:"submit"}," Salva "));})));}}]);return ModifyContactForm;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/GroupList.tsx
var GroupList_GroupList=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(GroupList,_Component);function GroupList(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,GroupList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(GroupList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:[],loading:true,error:undefined,timestamp:0};_this.generateValidationSchema=function(){return yup_lib["object"]().shape({groups:yup_lib["array"]().of(yup_lib["object"]({id:yup_lib["mixed"]().required(),roleId:yup_lib["mixed"]().required()}))});};_this.onSubmitChange=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(_ref){var groups,result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:groups=_ref.groups;_context.prev=1;_context.next=4;return client.groups.setGroupsNominativeRole(_this.props.nominative.id,groups);case 4:result=_context.sent;if(result.code>=200&&result.code<300){Object(lib["toast"])("Nominativi associati",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.props.refetch();}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);console.error(_context.t0);Object(lib["toast"])('Errore associazione',{type:lib["toast"].TYPE.ERROR});case 12:case"end":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.filterData=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(e){var data;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client.groups.all(e.target.value,100000,0);case 2:data=_context2.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}if(!(e.target.value==='')){_context2.next=9;break;}_context2.next=7;return client.groups.all('',100000,0);case 7:data=_context2.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}case 9:case"end":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}();_this.handleSelection=function(group,setFieldValue,_ref4){var groups=_ref4.groups;return function(event){var selected=[];if(groups.find(function(el){return el.id===group.id;})!==undefined){selected=Object(toConsumableArray["a" /* default */])(groups.filter(function(el){return el.id!==group.id;}));}else{selected=[].concat(Object(toConsumableArray["a" /* default */])(groups),[{id:group.id,role:undefined}]);}setFieldValue('groups',selected);};};_this.handleRole=function(group,_ref5,setFieldValue){var groups=_ref5.groups;return function(event){var pos=groups.findIndex(function(el){return el.id===group.id;});var values=Object(toConsumableArray["a" /* default */])(groups);values[pos].roleId=Number(event.target.value);setFieldValue('groups',values);};};_this.handleSpecifica=function(nominative,_ref6,setFieldValue){var groups=_ref6.groups;return function(event){var pos=groups.findIndex(function(el){return el.id===nominative.id;});var values=Object(toConsumableArray["a" /* default */])(groups);values[pos].specificaRuolo=event.target.value;setFieldValue('groups',values);};};return _this;}Object(createClass["a" /* default */])(GroupList,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var data;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return client.groups.all('',100000,0);case 2:data=_context3.sent;if(data.code===200){if(data.timestamp>this.state.timestamp)this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{this.setState({error:'Errore API',loading:false});}case 4:case"end":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{groups:[]},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitChange},function(_ref7){var isValid=_ref7.isValid,setFieldValue=_ref7.setFieldValue,values=_ref7.values;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("input",{type:"text",onChange:debounced(_this2.filterData,350)}),react_default.a.createElement("ul",{className:common_module_default.a.list},_this2.state.data&&_this2.state.data.map(function(el){return react_default.a.createElement(react_default.a.Fragment,{key:el.id},react_default.a.createElement("li",{style:{display:'flex',alignItems:'center',padding:'.5rem 0'}},react_default.a.createElement("input",{type:"checkbox",defaultChecked:false,onChange:_this2.handleSelection(el,setFieldValue,values)}),react_default.a.createElement("span",null,el.name),values.groups.find(function(group){return group.id===el.id;})!==undefined&&react_default.a.createElement("span",null,react_default.a.createElement("select",{onChange:_this2.handleRole(el,values,setFieldValue),defaultValue:"",style:{marginLeft:'auto'}},react_default.a.createElement("option",{value:""},"Seleziona ruolo"),_this2.props.roles&&_this2.props.roles.map(function(role){return react_default.a.createElement("option",{key:role.id,value:role.id},role.name);})),react_default.a.createElement("input",{type:"text",placeholder:"Specifica ruolo",onChange:_this2.handleSpecifica(el,values,setFieldValue)}))));})),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Associa "));})));}}]);return GroupList;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/ContactDetailPanel.tsx
var ContactDetailPanel_ContactDetailPanel=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(ContactDetailPanel,_Component);function ContactDetailPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,ContactDetailPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(ContactDetailPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={data:{},loading:true,error:null,resId:undefined,selected:[],selectedGroups:[],editedGroup:null};_this.toggleGroup=function(g){console.log('toggle group '+g);_this.setState({editedGroup:g==_this.state.editedGroup?null:g});};_this.refetch=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var panels,resId,_ref2,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:panels=_this.context.panels;resId=getResId(panels,_this.props.id);if(!resId){_context.next=14;break;}_context.prev=3;_context.next=6;return client.nominatives.getById(resId);case 6:_ref2=_context.sent;data=_ref2.data;_this.setState({loading:false,data:data,error:null,resId:resId});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context["catch"](3);_this.setState({loading:false,data:null,error:'API Error'});case 14:case"end":return _context.stop();}}},_callee,null,[[3,11]]);}));_this.removeContact=function(id){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var response;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client.contacts.delete(id);case 2:response=_context2.sent;if(response.code===204){Object(lib["toast"])("Contatto eliminato con successo",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])("Rimozione contatto fallita",{type:lib["toast"].TYPE.ERROR});}case 4:case"end":return _context2.stop();}}},_callee2);})));};_this.onRemoveContact=function(contact){return function(){Modal_Modal.show('Elimina Contatto',react_default.a.createElement(react_default.a.Fragment,null,"Procedere con l'eliminazione del Contatto",react_default.a.createElement("br",null),react_default.a.createElement("b",null,contact.value)," ?"),_this.removeContact(contact.id));};};_this.addNominativeToGroup=function(nominative){return function(){Modal_Modal.show('Associa a Gruppo',react_default.a.createElement(GroupList_GroupList,{refetch:_this.refetch,nominative:nominative,roles:_this.context.roles}));};};_this.removeNominativeFromGroup=function(id){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var panels,resId,response;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:panels=_this.context.panels;resId=getResId(panels,_this.props.id);_context3.next=4;return client.groups.unsetNominativeRole(id,resId);case 4:response=_context3.sent;if(response.code>=200&&response.code<300){Object(lib["toast"])("Nominativo dissociato con successo",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])("Dissociazione da gruppo fallita",{type:lib["toast"].TYPE.ERROR});}case 6:case"end":return _context3.stop();}}},_callee3);})));};_this.onRemoveNominativeFromGroup=function(group,nominative){return function(){Modal_Modal.show('Dissocia Nominativo',react_default.a.createElement(react_default.a.Fragment,null,"Procedere con la dissociazione del nominativo:",react_default.a.createElement("br",null),react_default.a.createElement("b",null,nominative.firstName," ",nominative.lastName),react_default.a.createElement("br",null),"dal gruppo",react_default.a.createElement("br",null),react_default.a.createElement("b",null,group.name)),_this.removeNominativeFromGroup(group.id));};};_this.onGroupDetail=function(id){return function(){_this.context.onSelect(PanelType.GROUP_DETAILS,_this.props.id,id);};};_this.modifyNominative=function(nominative){return function(){Modal_Modal.show('Modifica Nominativo',react_default.a.createElement(DetailForm_DetailForm,{nominative:nominative,refetch:_this.refetch}));};};_this.getRuoloIdFromName=function(nome,roles){for(var k=0;k<roles.length;k++){if(roles[k].name==nome)return roles[k].id;}return"";};_this.getMenuRuolo=function(g){var ruolo=_this.getRuoloSingolo(g);var specifica=_this.getSpecificaRuoloSingolo(g);for(var k=0;k<_this.state.data.groups.length;k++){if(_this.state.data.groups[k].id==g.id){return react_default.a.createElement("span",null,react_default.a.createElement("select",{onChange:_this.handleRole(g),defaultValue:ruolo,style:{marginLeft:'auto'}},react_default.a.createElement("option",{value:""},"---"),_this.context.roles&&_this.context.roles.map(function(role){return react_default.a.createElement("option",{key:role.name,value:role.name},role.name);})),react_default.a.createElement("input",{style:{display:'inline'},className:"mytext",value:specifica,placeholder:"Specifica ruolo",type:"text",onChange:_this.handleSpecifica(g)}));}}};_this.handleRole=function(group){return function(event){var k;var out;for(k=0;k<_this.state.data.groups.length;k++){if(_this.state.data.groups[k].id==group.id){_this.state.data.groups[k].role=event.target.value;var data2=Object(objectSpread["a" /* default */])({},_this.state.data);_this.setState({data:data2});_this.onSubmitChange(group.id,_this.state.data.groups[k].role,_this.state.data.groups[k].specificaRuolo);return;}}};};_this.handleSpecifica=function(group){return function(event){var k;var out;for(k=0;k<_this.state.data.groups.length;k++){if(_this.state.data.groups[k].id==group.id){_this.state.data.groups[k].specificaRuolo=event.target.value;_this.setState({data:_this.state.data});var data2=Object(objectSpread["a" /* default */])({},_this.state.data);_this.setState({data:data2});_this.onSubmitChange(group.id,_this.state.data.groups[k].role,_this.state.data.groups[k].specificaRuolo);return;}}};};_this.onSubmitChange=/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(group,ruolo,spec){var panels,resId,param,result;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;panels=_this.context.panels;resId=getResId(panels,_this.props.id);param={nominativeId:resId,role:_this.getRuoloIdFromName(ruolo,_this.context.roles),specificaRuolo:spec};_context4.next=6;return client.groups.setNominativesRole(group,[param]);case 6:result=_context4.sent;_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4["catch"](0);console.error(_context4.t0);Object(lib["toast"])('Errore associzione',{type:lib["toast"].TYPE.ERROR});case 13:case"end":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function(_x,_x2,_x3){return _ref5.apply(this,arguments);};}();_this.getRuolo=function(group){var k;var out;for(k=0;k<_this.state.data.groups.length;k++){if(_this.state.data.groups[k].id==group.id){out=' '+_this.state.data.groups[k].role;if(_this.state.data.groups[k].specificaRuolo)out+=' - '+_this.state.data.groups[k].specificaRuolo;return out;}}return'';};_this.getRuoloSingolo=function(group){var k;var out;for(k=0;k<_this.state.data.groups.length;k++){if(_this.state.data.groups[k].id==group.id)return _this.state.data.groups[k].role;}return'';};_this.getSpecificaRuoloSingolo=function(group){var k;var out;for(k=0;k<_this.state.data.groups.length;k++){if(_this.state.data.groups[k].id==group.id)return _this.state.data.groups[k].specificaRuolo;}return'';};_this.addContact=function(channels){return function(){Modal_Modal.show('Crea Contatto',react_default.a.createElement(AddContactForm_AddContactForm,{channels:channels,refetch:_this.refetch,nominative:_this.state.data}));};};_this.modifyContact=function(channels,contact){return function(){Modal_Modal.show('Modifica Contatto',react_default.a.createElement(ModifyContactForm_ModifyContactForm,{channels:channels,refetch:_this.refetch,contact:contact,nominative:_this.state.data}));};};_this.deleteContacts=function(contacts){return function(event){Modal_Modal.show('Elimina Contatti',react_default.a.createElement("div",{style:{textAlign:'left'}},react_default.a.createElement("div",{style:{display:'block',marginBottom:'1rem'}}," Eliminare i seguenti contatti: ",react_default.a.createElement("br",null)),contacts.map(function(el){return react_default.a.createElement("span",{key:el.id,style:{display:'block',marginBottom:'.25rem'}},react_default.a.createElement("b",null,"- ",el.value));}),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),onClick:_this.removeContacts(_this.state.selected)}," Elimina ")));};};_this.removeContacts=function(ids){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var obj,response;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:obj=ids.map(function(el){return{id:el.id};});_context5.next=3;return client.contacts.deleteMulti(obj);case 3:response=_context5.sent;if(response.code>=200&&response.code<300){Object(lib["toast"])("Contatti eliminati",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])("Rimozione contatti fallita",{type:lib["toast"].TYPE.ERROR});}case 5:case"end":return _context5.stop();}}},_callee5);})));};_this.onRemoveGroups=function(groups){return(/*#__PURE__*/function(){var _ref7=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(e){return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:Modal_Modal.show('Elimina Contatti',react_default.a.createElement("div",{style:{textAlign:'left'}},react_default.a.createElement("div",{style:{display:'block',marginBottom:'1rem'}}," Disassociare i seguenti gruppi: ",react_default.a.createElement("br",null)),groups.map(function(el){return react_default.a.createElement("span",{key:el.id,style:{display:'block',marginBottom:'.25rem'}},react_default.a.createElement("b",null,"- ",el.name));}),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),onClick:_this.removeGroups(_this.state.selectedGroups)}," Disassocia ")));case 1:case"end":return _context6.stop();}}},_callee6);}));return function(_x4){return _ref7.apply(this,arguments);};}());};_this.removeGroups=function(ids){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee7(){var obj,response;return regenerator_default.a.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:obj=ids.map(function(el){return{id:el.id,roleId:_this.context.roles.find(function(elm){return elm.name===el.role;}).id};});_context7.next=3;return client.groups.unsetGroupsRole(_this.state.resId,obj);case 3:response=_context7.sent;if(response.code<300){Object(lib["toast"])("Gruppi disassociati",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.setState({selectedGroups:[]},_this.refetch);}else{Object(lib["toast"])("Rimozione grouppo fallita",{type:lib["toast"].TYPE.SUCCESS});}case 5:case"end":return _context7.stop();}}},_callee7);})));};_this.selectContact=function(contact){return function(event){var selected=[];if(_this.state.selected.find(function(el){return el.id===contact.id;})!==undefined){selected=Object(toConsumableArray["a" /* default */])(_this.state.selected.filter(function(el){return el.id!==contact.id;}));}else{selected=[].concat(Object(toConsumableArray["a" /* default */])(_this.state.selected),[contact]);}_this.setState({selected:selected});};};_this.selectGroup=function(group){return function(e){var selectedGroups=[];if(_this.state.selectedGroups.find(function(el){return el.id===group.id;})!==undefined){selectedGroups=Object(toConsumableArray["a" /* default */])(_this.state.selected.filter(function(el){return el.id!==group.id;}));}else{selectedGroups=[].concat(Object(toConsumableArray["a" /* default */])(_this.state.selectedGroups),[group]);}_this.setState({selectedGroups:selectedGroups});};};return _this;}Object(createClass["a" /* default */])(ContactDetailPanel,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee8(){var panels,resId,_ref9,data;return regenerator_default.a.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:panels=this.context.panels;resId=getResId(panels,this.props.id);if(!resId){_context8.next=14;break;}_context8.prev=3;_context8.next=6;return client.nominatives.getById(resId);case 6:_ref9=_context8.sent;data=_ref9.data;this.setState({loading:false,data:data,error:null,resId:resId});_context8.next=14;break;case 11:_context8.prev=11;_context8.t0=_context8["catch"](3);this.setState({loading:false,data:null,error:'API Error'});case 14:case"end":return _context8.stop();}}},_callee8,this,[[3,11]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var panels=this.context.panels;var resId=getResId(panels,this.props.id);if(resId!==this.state.resId){this.refetch();}}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,data=_this$state.data,error=_this$state.error,loading=_this$state.loading;var channels=this.context.channels;var dat=new Date();dat.setTime(data.lastEdit);return react_default.a.createElement(react_default.a.Fragment,null,loading&&react_default.a.createElement(Loader_Loader,null),!loading&&!error&&react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailWrapper},react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailData},react_default.a.createElement("h1",null,data.firstName," ",data.lastName),react_default.a.createElement("div",null,"(",data.contacts&&data.contacts.length,") Contatti - (",data.groups&&data.groups.length,") Gruppi"),react_default.a.createElement("div",null,"Proprietario del nominativo: ",data.owner),react_default.a.createElement("div",null,"Ultima Modifica: ",data.modifyUser," - "," "+dat.toLocaleString('it-IT')),react_default.a.createElement("button",{style:{marginTop:'1rem'},className:common_module_default.a.button,onClick:this.modifyNominative(data)},"Modifica Nominativo"),react_default.a.createElement("button",{style:{marginTop:'1rem',marginLeft:'1rem'},className:common_module_default.a.button,onClick:this.refetch},"Refresh")),react_default.a.createElement("div",null,react_default.a.createElement("h4",{style:{marginTop:0}},"Contatti"),react_default.a.createElement("div",{style:{display:'flex'}},react_default.a.createElement("button",{style:{marginBottom:'1rem'},className:common_module_default.a.button,onClick:this.addContact(channels)},"Aggiungi Contatto"),this.state.selected.length>0&&react_default.a.createElement("button",{style:{marginBottom:'1rem',marginLeft:'1rem'},className:common_module_default.a.button,onClick:this.deleteContacts(this.state.selected)},"Rimuovi Contatti")),react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.dataList},react_default.a.createElement("ul",{className:ContactDetailPanel_module_default.a.contactsList},data.contacts&&data.contacts.map(function(el){return react_default.a.createElement("li",{key:el.id},react_default.a.createElement("span",{className:"mycheckbox"},react_default.a.createElement("input",{style:{'marginRight':'1rem'},className:"mycheckbox",type:"checkbox",onChange:_this2.selectContact(el)})),react_default.a.createElement("span",null,getChannelName(channels,el.channelId)," - ",el.value),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.modifyContact(channels,el)}," \uD83D\uDCDD"),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onRemoveContact(el)},"\u274C"));})))),react_default.a.createElement("div",null,react_default.a.createElement("h4",{style:{marginTop:0}},"Gruppi"),react_default.a.createElement("button",{style:{marginBottom:'1rem'},className:common_module_default.a.button,onClick:this.addNominativeToGroup(data)},"Aggiungi Nominativo a Gruppo"),this.state.selectedGroups.length!==0&&react_default.a.createElement("button",{style:{marginBottom:'1rem',marginLeft:'1rem'},className:common_module_default.a.button,onClick:this.onRemoveGroups(this.state.selectedGroups)},"Dissocia Gruppi"),react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.dataList},react_default.a.createElement("ul",{className:ContactDetailPanel_module_default.a.groupsList},data.groups&&data.groups.map(function(el,id){return react_default.a.createElement("li",{key:el.id},react_default.a.createElement("span",{className:"mycheckbox"},react_default.a.createElement("input",{className:"mycheckbox",style:{width:'30px !important'},type:"checkbox",onChange:_this2.selectGroup(el)})),react_default.a.createElement("span",null,react_default.a.createElement(DraggableComponent,{type:"GROUP",data:el.id},react_default.a.createElement("b",null,react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:function onClick(e){return _this2.toggleGroup(el.id);}},el.name))," -  ",_this2.state.editedGroup==el.id?_this2.getMenuRuolo(el):_this2.getRuolo(el))),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onGroupDetail(el.id)}," \uD83D\uDD0D "),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onRemoveNominativeFromGroup(el,data)}," \u274C "));}))))),!loading&&error&&react_default.a.createElement("div",null,error));}}]);return ContactDetailPanel;}(react["Component"]);ContactDetailPanel_ContactDetailPanel.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/ContactDetailPanel/index.ts

// CONCATENATED MODULE: ./src/components/Panel/GroupDetailPanel/GroupForm.tsx
var GroupForm_GroupForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(GroupForm,_Component);function GroupForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,GroupForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(GroupForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.generateValidationSchema=function(){return yup_lib["object"]().shape({name:yup_lib["string"]().required()});};_this.onSubmitGroup=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.groups.update(_this.props.group.id,values);case 2:result=_context.sent;if(result.code===204){Object(lib["toast"])("Gruppo modificato",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.props.refetch();}else{Object(lib["toast"])("Modifica fallita, riprova",{type:lib["toast"].TYPE.ERROR});}case 4:case"end":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}Object(createClass["a" /* default */])(GroupForm,[{key:"render",value:function render(){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{name:this.props.group.name},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitGroup},function(_ref2){var isValid=_ref2.isValid;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("div",{className:common_module_default.a.field},react_default.a.createElement("label",null,react_default.a.createElement("span",null,"Nome"),react_default.a.createElement(formik_esm["a" /* Field */],{type:"text",name:"name"}))),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"},"Modifica"));})));}}]);return GroupForm;}(react["Component"]);GroupForm_GroupForm.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/GroupDetailPanel/GroupList.tsx
var GroupDetailPanel_GroupList_GroupList=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(GroupList,_Component);function GroupList(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,GroupList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(GroupList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:[],selected:[],loading:true,error:undefined,timestamp:0};_this.context=void 0;_this.generateValidationSchema=function(){return yup_lib["object"]().shape({ids:yup_lib["array"]().required()});};_this.onSubgroupAdd=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values,actions){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return client.groups.setSubgroup(_this.props.group.id,values.id);case 3:result=_context.sent;if(result.code===201){Object(lib["toast"])("Sottogruppo associato",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.props.refetch();}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context["catch"](0);console.error(_context.t0);Object(lib["toast"])('Errore nell\' associazione',{type:lib["toast"].TYPE.ERROR});case 11:case"end":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleSelection=function(group,setFieldValue){return function(event){var selected=[];if(_this.state.selected.find(function(el){return el.id===group.id;})!==undefined){selected=Object(toConsumableArray["a" /* default */])(_this.state.selected.filter(function(el){return el.id!==group.id;}));}else{selected=[].concat(Object(toConsumableArray["a" /* default */])(_this.state.selected),[{subgroupId:group.id}]);}setFieldValue('ids',selected);_this.setState({selected:selected});};};_this.handleSubmit=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(values,actions){var response;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(!_this.props.supergroup){_context2.next=7;break;}_context2.next=4;return client.groups.setSupergroupMulti(_this.props.group.id,values.ids);case 4:_context2.t0=_context2.sent;_context2.next=10;break;case 7:_context2.next=9;return client.groups.setSubgroupMulti(_this.props.group.id,values.ids);case 9:_context2.t0=_context2.sent;case 10:response=_context2.t0;if(response.code>=200&&response.code<300){Object(lib["toast"])("Richiesta eseguita",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.props.refetch();}_context2.next=18;break;case 14:_context2.prev=14;_context2.t1=_context2["catch"](0);console.error(_context2.t1);Object(lib["toast"])('Errore nell\' associazione',{type:lib["toast"].TYPE.ERROR});case 18:case"end":return _context2.stop();}}},_callee2,null,[[0,14]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();_this.filterData=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(e){var data;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return client.groups.all(e.target.value,100000,0);case 2:data=_context3.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}if(!(e.target.value==='')){_context3.next=9;break;}_context3.next=7;return client.groups.all('',100000,0);case 7:data=_context3.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}case 9:case"end":return _context3.stop();}}},_callee3);}));return function(_x5){return _ref3.apply(this,arguments);};}();return _this;}Object(createClass["a" /* default */])(GroupList,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(){var data;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return client.groups.all('',100000,0);case 2:data=_context4.sent;if(data.code===200){if(data.timestamp>this.state.timestamp)this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{this.setState({error:'Errore API',loading:false});}case 4:case"end":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{ids:[]},validationSchema:this.generateValidationSchema(),onSubmit:this.handleSubmit},function(_ref4){var isValid=_ref4.isValid,setFieldValue=_ref4.setFieldValue,resetForm=_ref4.resetForm;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("input",{type:"text",onChange:debounced(_this2.filterData,350)}),react_default.a.createElement("ul",{className:common_module_default.a.list},_this2.state.data&&_this2.state.data.map(function(el){return react_default.a.createElement(react_default.a.Fragment,{key:el.id},el.id!==-1&&el.id!==_this2.props.group.id&&react_default.a.createElement("li",{style:{}},react_default.a.createElement("input",{type:"checkbox",defaultChecked:false,onChange:_this2.handleSelection(el,setFieldValue)}),react_default.a.createElement("span",null,el.name)));})),react_default.a.createElement("button",{style:{marginTop:'1rem'},className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"},"Associa"));})));}}]);return GroupList;}(react["Component"]);GroupDetailPanel_GroupList_GroupList.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/GroupDetailPanel/AddNominativesForm.tsx
var AddNominativesForm_AddNominativesForm=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(AddNominativesForm,_Component);function AddNominativesForm(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,AddNominativesForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(AddNominativesForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:[],loading:true,error:undefined,timestamp:0};_this.generateValidationSchema=function(){return yup_lib["object"]().shape({nominatives:yup_lib["array"]().of(yup_lib["object"]({nominativeId:yup_lib["mixed"]().required(),role:yup_lib["mixed"]().required()}))});};_this.onSubmitChange=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(_ref){var nominatives,result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:nominatives=_ref.nominatives;_context.prev=1;_context.next=4;return client.groups.setNominativesRole(_this.props.group.id,nominatives);case 4:result=_context.sent;if(result.code===201){Object(lib["toast"])("Nominativi associati",{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.props.refetch();}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);console.error(_context.t0);Object(lib["toast"])('Errore associazione',{type:lib["toast"].TYPE.ERROR});case 12:case"end":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleSelection=function(nominative,setFieldValue,_ref3){var nominatives=_ref3.nominatives;return function(event){var selected=[];if(nominatives.find(function(el){return el.id===nominative.id;})!==undefined){selected=Object(toConsumableArray["a" /* default */])(nominatives.filter(function(el){return el.id!==nominative.id;}));}else{selected=[].concat(Object(toConsumableArray["a" /* default */])(nominatives),[{nominativeId:nominative.id,role:undefined}]);}setFieldValue('nominatives',selected);};};_this.handleRole=function(nominative,_ref4,setFieldValue){var nominatives=_ref4.nominatives;return function(event){var pos=nominatives.findIndex(function(el){return el.nominativeId===nominative.id;});var values=Object(toConsumableArray["a" /* default */])(nominatives);values[pos].role=event.target.value;setFieldValue('nominatives',values);};};_this.handleSpecifica=function(nominative,_ref5,setFieldValue){var nominatives=_ref5.nominatives;return function(event){var pos=nominatives.findIndex(function(el){return el.nominativeId===nominative.id;});var values=Object(toConsumableArray["a" /* default */])(nominatives);values[pos].specificaRuolo=event.target.value;setFieldValue('nominatives',values);};};_this.filterData=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(e){var data;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client.nominatives.all(e.target.value,100000,0);case 2:data=_context2.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}if(!(e.target.value==='')){_context2.next=9;break;}_context2.next=7;return client.nominatives.all('',100000,0);case 7:data=_context2.sent;if(data.code===200){if(data.timestamp>_this.state.timestamp)_this.setState({data:data.data,loading:false,timestamp:data.timestamp});}else{_this.setState({error:'Errore API',loading:false});}case 9:case"end":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref6.apply(this,arguments);};}();return _this;}Object(createClass["a" /* default */])(AddNominativesForm,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var data;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return client.nominatives.all('',100000,0);case 2:data=_context3.sent;if(data.code===200){this.setState({data:data.data,loading:false});}else{this.setState({error:'Errore API',loading:false});}case 4:case"end":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{className:ContactDetailPanel_module_default.a.detailForm},react_default.a.createElement(formik_esm["c" /* Formik */],{initialValues:{nominatives:[]},validationSchema:this.generateValidationSchema(),onSubmit:this.onSubmitChange},function(_ref7){var isValid=_ref7.isValid,setFieldValue=_ref7.setFieldValue,values=_ref7.values;return react_default.a.createElement(formik_esm["b" /* Form */],null,react_default.a.createElement("input",{type:"text",onChange:debounced(_this2.filterData,350)}),react_default.a.createElement("ul",{className:common_module_default.a.list},_this2.state.data&&_this2.state.data.map(function(el){return react_default.a.createElement(react_default.a.Fragment,{key:el.id},react_default.a.createElement("li",{style:{display:'flex',alignItems:'center',padding:'.5rem 0'}},react_default.a.createElement("input",{type:"checkbox",defaultChecked:false,onChange:_this2.handleSelection(el,setFieldValue,values)}),react_default.a.createElement("span",null,el.lastName," ",el.firstName),values.nominatives.find(function(nomin){return nomin.nominativeId===el.id;})!==undefined&&react_default.a.createElement("span",null,react_default.a.createElement("select",{onChange:_this2.handleRole(el,values,setFieldValue),defaultValue:"",style:{marginLeft:'auto'}},react_default.a.createElement("option",{value:""},"Seleziona ruolo e specifica"),_this2.props.roles&&_this2.props.roles.map(function(role){return react_default.a.createElement("option",{key:role.id,value:role.id},role.name);})),react_default.a.createElement("input",{placeholder:"Specifica ruolo",type:"text",onChange:_this2.handleSpecifica(el,values,setFieldValue)}))));})),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton),disabled:!isValid,type:"submit"}," Associa "));})));}}]);return AddNominativesForm;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Panel/GroupDetailPanel/GroupDetailPanel.tsx
var GroupDetailPanel_GroupDetailPanel=/*#__PURE__*/function(_PureComponent){Object(inherits["a" /* default */])(GroupDetailPanel,_PureComponent);function GroupDetailPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,GroupDetailPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(GroupDetailPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={selectedGroups:[],selectedSupergroups:[],selectedNominatives:[],editedNominative:null,data:{},loading:true,error:null,resId:undefined};_this.toggleNominative=function(nominative){console.log('toggle nominative '+nominative);_this.setState({editedNominative:nominative==_this.state.editedNominative?null:nominative});};_this.refetch=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var panels,resId,_ref2,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:panels=_this.context.panels;resId=getResId(panels,_this.props.id);if(!resId){_context.next=14;break;}_context.prev=3;_context.next=6;return client.groups.getById(resId);case 6:_ref2=_context.sent;data=_ref2.data;_this.setState({loading:false,data:data,error:null,resId:resId});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context["catch"](3);_this.setState({loading:false,data:null,error:'API Error'});case 14:case"end":return _context.stop();}}},_callee,null,[[3,11]]);}));_this.onGroupDetail=function(id){return function(){_this.context.onSelect(PanelType.GROUP_DETAILS,_this.props.id,id);// this.refetch() // Needed or data props won't update
};};_this.onNominativeDetail=function(id){return function(){_this.context.onSelect(PanelType.CONTACT_DETAILS,_this.props.id,id);// this.refetch() // Needed or data props won't update
};};_this.deleteSubgroup=function(id){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var data,response;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=_this.state.data;_context2.next=3;return client.groups.removeSubgroup(data.id,id);case 3:response=_context2.sent;if(response.code<300){Object(lib["toast"])('Sottogruppo eliminato con successo',{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])('Errore eliminazione sottogruppo',{type:lib["toast"].TYPE.ERROR});}case 5:case"end":return _context2.stop();}}},_callee2);})));};_this.onDeleteSubgroup=function(group,fatherGroup){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:Modal_Modal.show('Conferma disaddociazione gruppo',react_default.a.createElement("div",null,"Confermi la disassociazione del gruppo:",react_default.a.createElement("br",null),react_default.a.createElement("b",null,group.name),react_default.a.createElement("br",null),"da",react_default.a.createElement("br",null),react_default.a.createElement("b",null,fatherGroup.name)),_this.deleteSubgroup(group.id));case 1:case"end":return _context3.stop();}}},_callee3);})));};_this.modifyGroup=function(group){return function(){Modal_Modal.show('Modifica Gruppo',react_default.a.createElement(GroupForm_GroupForm,{refetch:_this.refetch,group:group}));};};_this.exportGroup=function(group){return function(){window.open("/o/rubrica/gruppo/?gruppo="+group.id,"_blank");};};_this.unsetNominative=function(group,nominative){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(){var response;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return client.groups.unsetNominativeRole(group.id,nominative.id);case 2:response=_context4.sent;if(response.code<300){Object(lib["toast"])('Nominativo dissociato con successo',{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])('Errore disassociazione nominativo',{type:lib["toast"].TYPE.ERROR});}case 4:case"end":return _context4.stop();}}},_callee4);})));};_this.onUnsetNominative=function(nominative,group){return function(){Modal_Modal.show('Disassocia Nominativo',react_default.a.createElement("div",null,"Procedere con la dissociazione del nominativo ",react_default.a.createElement("br",null),react_default.a.createElement("b",null,nominative.firstName," ",nominative.lastName)," ",react_default.a.createElement("br",null),"dal gruppo: ",react_default.a.createElement("br",null),react_default.a.createElement("b",null,group.name," ?")),_this.unsetNominative(group,nominative));};};_this.onSetNominative=function(group){return function(){Modal_Modal.show('Associa Nominativi',react_default.a.createElement(AddNominativesForm_AddNominativesForm,{refetch:_this.refetch,roles:_this.context.roles,group:group}));};};_this.onCreateNominative=function(group){return function(){Modal_Modal.showTall('Crea Nominativo in Gruppo',react_default.a.createElement(CreateGreaterNominativeForm_CreateGreaterNominativeForm,{refetch:_this.refetch,roles:_this.context.roles,group:group}));};};_this.onAddSubgroup=function(group){return function(){Modal_Modal.show('Associa Sottogruppi',react_default.a.createElement(GroupDetailPanel_GroupList_GroupList,{refetch:_this.refetch,group:group}));};};_this.onAddSupergroup=function(group){return function(){Modal_Modal.show('Aggiungi appartenenza',react_default.a.createElement(GroupDetailPanel_GroupList_GroupList,{supergroup:true,refetch:_this.refetch,group:group}));};};_this.onRemoveSubgroups=function(groups,parentId){return function(){Modal_Modal.show('Disassocia Sottogruppi',react_default.a.createElement("div",{style:{textAlign:'left'}},"Procedere con la disassociazione dei gruppi:",groups.map(function(el){return react_default.a.createElement("div",{key:el.id,style:{margin:'.25rem 0',fontWeight:'bold'}},"- ",el.name);}),react_default.a.createElement("button",{onClick:_this.removeSubgroups(groups,parentId),className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton)},"Disassocia")));};};_this.onRemoveSupergroups=function(groups,parentId){return function(){Modal_Modal.show('Rimuovi appartenenza',react_default.a.createElement("div",{style:{textAlign:'left'}},"Procedere con la rimozione delle appartenenze:",groups.map(function(el){return react_default.a.createElement("div",{key:el.id,style:{margin:'.25rem 0',fontWeight:'bold'}},"- ",el.name);}),react_default.a.createElement("button",{onClick:_this.removeSupergroups(groups,parentId),className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton)},"Rimuovi")));};};_this.onRemoveNominatives=function(nominatives,group){return function(){Modal_Modal.show('Disassocia Nominativi',react_default.a.createElement("div",{style:{textAlign:'left'}},"Procedere con la disassociazione dei nominativi:",nominatives.map(function(el){return react_default.a.createElement("div",{key:el.id,style:{margin:'.25rem 0',fontWeight:'bold'}},"- ",el.firstName," ",el.lastName);}),react_default.a.createElement("div",null,"Dal gruppo: ",group.name," ?"),react_default.a.createElement("button",{onClick:_this.removeNominatives(group.id,nominatives),className:"".concat(common_module_default.a.button," ").concat(common_module_default.a.actionButton)},"Disassocia")));};};_this.removeNominatives=function(id,nominatives){return(/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var data,response;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data=nominatives.map(function(el){return{nominativeId:el.id};});_context5.prev=1;_context5.next=4;return client.groups.unsetNominativesRole(id,data);case 4:response=_context5.sent;if(response.code<300){Object(lib["toast"])('Nominativi disassociati',{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();}else{Object(lib["toast"])('Errore disassociazione nominativi',{type:lib["toast"].TYPE.ERROR});}_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5["catch"](1);Object(lib["toast"])('Errore disassociazione nominativo',{type:lib["toast"].TYPE.ERROR});case 11:case"end":return _context5.stop();}}},_callee5,null,[[1,8]]);})));};_this.removeSubgroups=function(groups,parentId){return(/*#__PURE__*/function(){var _ref7=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(event){var formattedRequest,response;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:formattedRequest=groups.map(function(el){return{subgroupId:el.id};});_context6.next=3;return client.groups.removeSubgroups(parentId,formattedRequest);case 3:response=_context6.sent;if(response.code<300){_this.setState({selectedGroups:[]},function(){Object(lib["toast"])('Gruppi disassociati',{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();});}else{console.error(response);Object(lib["toast"])('Errore disassociazione',{type:lib["toast"].TYPE.ERROR});}case 5:case"end":return _context6.stop();}}},_callee6);}));return function(_x){return _ref7.apply(this,arguments);};}());};_this.removeSupergroups=function(groups,parentId){return(/*#__PURE__*/function(){var _ref8=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee7(event){var formattedRequest,response;return regenerator_default.a.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:formattedRequest=groups.map(function(el){return{subgroupId:el.id};});_context7.next=3;return client.groups.removeSupergroups(parentId,formattedRequest);case 3:response=_context7.sent;if(response.code<300){_this.setState({selectedGroups:[]},function(){Object(lib["toast"])('Appartenenze rimosse',{type:lib["toast"].TYPE.SUCCESS});Modal_Modal.hide();_this.refetch();});}else{console.error(response);Object(lib["toast"])('Errore disassociazione',{type:lib["toast"].TYPE.ERROR});}case 5:case"end":return _context7.stop();}}},_callee7);}));return function(_x2){return _ref8.apply(this,arguments);};}());};_this.handleGroupSelection=function(group){return function(event){var selectedGroups=[];if(_this.state.selectedGroups.find(function(el){return el.id===group.id;})!==undefined){selectedGroups=Object(toConsumableArray["a" /* default */])(_this.state.selectedGroups.filter(function(el){return el.id!==group.id;}));}else{selectedGroups=[].concat(Object(toConsumableArray["a" /* default */])(_this.state.selectedGroups),[group]);}_this.setState({selectedGroups:selectedGroups});};};_this.handleSupergroupSelection=function(group){return function(event){var selectedSupergroups=[];if(_this.state.selectedSupergroups.find(function(el){return el.id===group.id;})!==undefined){selectedSupergroups=Object(toConsumableArray["a" /* default */])(_this.state.selectedSupergroups.filter(function(el){return el.id!==group.id;}));}else{selectedSupergroups=[].concat(Object(toConsumableArray["a" /* default */])(_this.state.selectedSupergroups),[group]);}_this.setState({selectedSupergroups:selectedSupergroups});};};_this.handleNominativeSelection=function(nominative){return function(event){var selectedNominatives=[];if(_this.state.selectedNominatives.find(function(el){return el.id===nominative.id;})!==undefined){selectedNominatives=Object(toConsumableArray["a" /* default */])(_this.state.selectedNominatives.filter(function(el){return el.id!==nominative.id;}));}else{selectedNominatives=[].concat(Object(toConsumableArray["a" /* default */])(_this.state.selectedNominatives),[nominative]);}_this.setState({selectedNominatives:selectedNominatives});};};_this.getRuoloIdFromName=function(nome,roles){for(var k=0;k<roles.length;k++){if(roles[k].name==nome)return roles[k].id;}return"";};_this.getMenuRuolo=function(nominativo){var ruolo=_this.getRuoloSingolo(nominativo);var specifica=_this.getSpecificaRuoloSingolo(nominativo);for(var k=0;k<nominativo.groups.length;k++){if(nominativo.groups[k].id==_this.state.data.id){return react_default.a.createElement("span",null,react_default.a.createElement("select",{onChange:_this.handleRole(nominativo),defaultValue:ruolo,style:{marginLeft:'auto'}},react_default.a.createElement("option",{value:""},"---"),_this.context.roles&&_this.context.roles.map(function(role){return react_default.a.createElement("option",{key:role.name,value:role.name},role.name);})),react_default.a.createElement("input",{style:{display:'inline'},className:"mytext",value:specifica,placeholder:"Specifica ruolo",type:"text",onChange:_this.handleSpecifica(nominativo)}));}}};_this.handleRole=function(nominativo){return function(event){var k;var out;for(k=0;k<nominativo.groups.length;k++){if(nominativo.groups[k].id==_this.state.data.id){nominativo.groups[k].role=event.target.value;var data2=Object(objectSpread["a" /* default */])({},_this.state.data);_this.setState({data:data2});_this.onSubmitChange(nominativo.id,nominativo.groups[k].role,nominativo.groups[k].specificaRuolo);return;}}};};_this.handleSpecifica=function(nominativo){return function(event){var k;var out;for(k=0;k<nominativo.groups.length;k++){if(nominativo.groups[k].id==_this.state.data.id){nominativo.groups[k].specificaRuolo=event.target.value;_this.setState({data:_this.state.data});var data2=Object(objectSpread["a" /* default */])({},_this.state.data);_this.setState({data:data2});_this.onSubmitChange(nominativo.id,nominativo.groups[k].role,nominativo.groups[k].specificaRuolo);return;}}};};_this.onSubmitChange=/*#__PURE__*/function(){var _ref9=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee8(utente,ruolo,spec){var param,result;return regenerator_default.a.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;param={nominativeId:utente,role:_this.getRuoloIdFromName(ruolo,_this.context.roles),specificaRuolo:spec};_context8.next=4;return client.groups.setNominativesRole(_this.state.data.id,[param]);case 4:result=_context8.sent;_context8.next=11;break;case 7:_context8.prev=7;_context8.t0=_context8["catch"](0);console.error(_context8.t0);Object(lib["toast"])('Errore associzione',{type:lib["toast"].TYPE.ERROR});case 11:case"end":return _context8.stop();}}},_callee8,null,[[0,7]]);}));return function(_x3,_x4,_x5){return _ref9.apply(this,arguments);};}();_this.getRuolo=function(nominativo){var k;var out;for(k=0;k<nominativo.groups.length;k++){if(nominativo.groups[k].id==_this.state.data.id){out='- '+nominativo.groups[k].role;if(nominativo.groups[k].specificaRuolo)out+=' - '+nominativo.groups[k].specificaRuolo;return out;}}return'';};_this.getRuoloSingolo=function(nominativo){var k;var out;for(k=0;k<nominativo.groups.length;k++){if(nominativo.groups[k].id==_this.state.data.id)return nominativo.groups[k].role;}return'';};_this.getSpecificaRuoloSingolo=function(nominativo){var k;var out;for(k=0;k<nominativo.groups.length;k++){if(nominativo.groups[k].id==_this.state.data.id)return nominativo.groups[k].specificaRuolo;}return'';};return _this;}Object(createClass["a" /* default */])(GroupDetailPanel,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee9(){var panels,resId,_ref10,data;return regenerator_default.a.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:panels=this.context.panels;resId=getResId(panels,this.props.id);if(!resId){_context9.next=14;break;}_context9.prev=3;_context9.next=6;return client.groups.getById(resId);case 6:_ref10=_context9.sent;data=_ref10.data;this.setState({loading:false,data:data,error:null,resId:resId});_context9.next=14;break;case 11:_context9.prev=11;_context9.t0=_context9["catch"](3);this.setState({loading:false,data:null,error:'API Error'});case 14:case"end":return _context9.stop();}}},_callee9,this,[[3,11]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var panels=this.context.panels;var resId=getResId(panels,this.props.id);if(resId!==this.state.resId){this.refetch();}}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,data=_this$state.data,error=_this$state.error,loading=_this$state.loading;var d=new Date();d.setTime(data.lastEdit);console.log(d);var ultimaMod=d.toLocaleString('it-IT');return react_default.a.createElement(react_default.a.Fragment,null,loading&&react_default.a.createElement(Loader_Loader,null),!loading&&!error&&react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.groupsWrapper},react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.groupData},react_default.a.createElement("h1",{style:{marginTop:0}},data.name),react_default.a.createElement("div",null,react_default.a.createElement("span",null,react_default.a.createElement("b",null,data.nominativeCount)," Nominativi"),"\xA0 - \xA0",react_default.a.createElement("span",null,react_default.a.createElement("b",null,data.subgroupsCount)," Sottogruppi"),"\xA0 - \xA0 Appartiene a \xA0",react_default.a.createElement("span",null,react_default.a.createElement("b",null,data.supergroupsCount)," gruppi"),react_default.a.createElement("div",null,"Proprietario: ",data.owner&&data.owner.name),react_default.a.createElement("div",null,"Ultima Modifica: ",ultimaMod," - ",data.lastEditUser&&"".concat(data.lastEditUser.firstName," ").concat(data.lastEditUser.lastName)))),react_default.a.createElement("button",{style:{marginTop:'.5rem',marginRight:'.5rem',marginBottom:'.5rem'},className:common_module_default.a.button,onClick:this.exportGroup(data)}," Esporta "),data.id!==-1&&react_default.a.createElement("button",{style:{marginTop:'.5rem',marginBottom:'.5rem'},className:common_module_default.a.button,onClick:this.modifyGroup(data)}," Modifica Gruppo "),react_default.a.createElement("br",null),react_default.a.createElement("br",null),react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.subgroupsList},react_default.a.createElement("h4",{style:{margin:0}},"Nominativi"),data.id!==-1&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("button",{style:{marginTop:'.5rem',marginRight:'.5rem',marginBottom:'.5rem'},className:common_module_default.a.button,onClick:this.onCreateNominative(data)},"Crea Nominativo"),react_default.a.createElement("button",{style:{marginTop:'.5rem',marginBottom:'.5rem'},className:common_module_default.a.button,onClick:this.onSetNominative(data)},"Associa Nominativo"),this.state.selectedNominatives&&this.state.selectedNominatives.length>0&&react_default.a.createElement("button",{style:{margin:'.5rem 0 .5rem 1rem'},className:common_module_default.a.button,onClick:this.onRemoveNominatives(this.state.selectedNominatives,data)},"Disassocia Nominativi")),react_default.a.createElement("ul",{className:GroupDetailPanel_module_default.a.nominatives},data.nominatives&&data.nominatives.length===0&&react_default.a.createElement("div",null,"Non ci sono nominativi"),data.nominatives&&data.nominatives.map(function(nominative){return react_default.a.createElement("li",{key:nominative.id},react_default.a.createElement("span",{className:"mycheckbox"},react_default.a.createElement("input",{type:"checkbox",className:"mycheckbox",defaultChecked:false,onChange:_this2.handleNominativeSelection(nominative)})),react_default.a.createElement("span",null,react_default.a.createElement(DraggableComponent,{type:"CONTACT",data:nominative.id},react_default.a.createElement("b",null,react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:function onClick(e){return _this2.toggleNominative(nominative.id);}},nominative.firstName," ",nominative.lastName))," ",_this2.state.editedNominative==nominative.id?_this2.getMenuRuolo(nominative):_this2.getRuolo(nominative)," (",nominative.groups&&nominative.groups.length," Gruppi) (",nominative.contacts&&nominative.contacts.length," Contatti)")),data.id!==-1&&react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onNominativeDetail(nominative.id)}," \uD83D\uDD0D "),data.id!==-1&&react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onUnsetNominative(nominative,data)}," \u274C "));}))),data.id!==-1&&react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.subgroupsList},react_default.a.createElement("div",null,react_default.a.createElement("h4",{style:{margin:'1rem 0 0'}},"Appartiene ai gruppi"),react_default.a.createElement("button",{style:{margin:'.5rem 0'},className:common_module_default.a.button,onClick:this.onAddSupergroup(data)},"Aggiungi appartenenza"),this.state.selectedSupergroups&&this.state.selectedSupergroups.length>0&&react_default.a.createElement("button",{style:{margin:'.5rem 0 .5rem 1rem'},className:common_module_default.a.button,onClick:this.onRemoveSupergroups(this.state.selectedSupergroups,data.id)},"Rimuovi appartenenza")),react_default.a.createElement("ul",{className:GroupDetailPanel_module_default.a.subGroups},data.supergroups&&data.supergroups.length===0&&react_default.a.createElement("div",null,"Non appartiene ad alcun gruppo"),data.supergroups&&data.supergroups.map(function(group){return react_default.a.createElement("li",{key:group.id},react_default.a.createElement("span",{className:"mycheckbox"},react_default.a.createElement("input",{type:"checkbox",className:"mycheckbox",defaultChecked:false,onChange:_this2.handleSupergroupSelection(group)})),react_default.a.createElement("span",null,react_default.a.createElement(DraggableComponent,{type:"GROUP",data:group.id},group.name)),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onGroupDetail(group.id)}," \uD83D\uDD0D"));}))),data.id!==-1&&react_default.a.createElement("div",{className:GroupDetailPanel_module_default.a.subgroupsList},react_default.a.createElement("div",null,react_default.a.createElement("h4",{style:{margin:'1rem 0 0'}},"Sottogruppi"),react_default.a.createElement("button",{style:{margin:'.5rem 0'},className:common_module_default.a.button,onClick:this.onAddSubgroup(data)},"Associa Sottogruppo"),this.state.selectedGroups&&this.state.selectedGroups.length>0&&react_default.a.createElement("button",{style:{margin:'.5rem 0 .5rem 1rem'},className:common_module_default.a.button,onClick:this.onRemoveSubgroups(this.state.selectedGroups,data.id)},"Disassocia Sottogruppi")),react_default.a.createElement("ul",{className:GroupDetailPanel_module_default.a.subGroups},data.subgroups&&data.subgroups.length===0&&react_default.a.createElement("div",null,"Non ci sono sottogruppi"),data.subgroups&&data.subgroups.map(function(group){return react_default.a.createElement("li",{key:group.id},react_default.a.createElement("span",{className:"mycheckbox"},react_default.a.createElement("input",{type:"checkbox",className:"mycheckbox",defaultChecked:false,onChange:_this2.handleGroupSelection(group)})),react_default.a.createElement("span",null,react_default.a.createElement(DraggableComponent,{type:"GROUP",data:group.id},group.name," (",group.subgroupsCount," Sottogruppi) (",group.nominativeCount," Nominativi)")),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onGroupDetail(group.id)}," \uD83D\uDD0D"),react_default.a.createElement("span",{style:{cursor:'pointer'},onClick:_this2.onDeleteSubgroup(group,data)}," \u274C"));})))),!loading&&error&&react_default.a.createElement("div",null,error));}}]);return GroupDetailPanel;}(react["PureComponent"]);GroupDetailPanel_GroupDetailPanel.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/GroupDetailPanel/index.ts

// EXTERNAL MODULE: ./src/components/Panel/PermissionPanel/PermissionPanel.module.css
var PermissionPanel_module = __webpack_require__(68);
var PermissionPanel_module_default = /*#__PURE__*/__webpack_require__.n(PermissionPanel_module);

// CONCATENATED MODULE: ./src/components/Panel/PermissionPanel/PermissionPanel.tsx
var PermissionPanel_PermissionPanel=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(PermissionPanel,_Component);function PermissionPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,PermissionPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(PermissionPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.state={loading:false,data:new Array(),error:null};_this.fetchData=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _ref2,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_this.setState({loading:true});_context.next=4;return client.rolesPermission.all();case 4:_ref2=_context.sent;data=_ref2.data;console.log(data);_this.setState({loading:false,data:data,error:null});_context.next=14;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);console.error(_context.t0);_this.setState({loading:false,data:[],error:'API Error'});case 14:case"end":return _context.stop();}}},_callee,null,[[0,10]]);}));_this.handleChange=function(role){return(/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(event){var r,w,p;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.persist();_context2.prev=1;console.log(event.target.value,'prev',role.read,'next',!role.read);_context2.t0=event.target.value;_context2.next=_context2.t0==="R"?6:_context2.t0==="W"?10:_context2.t0==="P"?14:18;break;case 6:_context2.next=8;return client.rolesPermission.update(role.roleId,role.permission,!role.read,role.write);case 8:r=_context2.sent;return _context2.abrupt("break",18);case 10:_context2.next=12;return client.rolesPermission.update(role.roleId,role.permission,role.read,!role.write);case 12:w=_context2.sent;return _context2.abrupt("break",18);case 14:_context2.next=16;return client.rolesPermission.update(role.roleId,!role.permission,role.read,role.write);case 16:p=_context2.sent;return _context2.abrupt("break",18);case 18:Object(lib["toast"])('Ruolo aggiornato con successo',{type:lib["ToastType"].SUCCESS});_this.fetchData();_context2.next=25;break;case 22:_context2.prev=22;_context2.t1=_context2["catch"](1);Object(lib["toast"])('Errore nell\' aggiornamento',{type:lib["ToastType"].ERROR});case 25:case"end":return _context2.stop();}}},_callee2,null,[[1,22]]);}));return function(_x){return _ref3.apply(this,arguments);};}());};return _this;}Object(createClass["a" /* default */])(PermissionPanel,[{key:"componentDidMount",value:function componentDidMount(){this.fetchData();}},{key:"render",value:function render(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,error=_this$state.error,data=_this$state.data;return react_default.a.createElement(react_default.a.Fragment,null,loading&&data.length===0&&react_default.a.createElement(Loader_Loader,null),!loading&&!error&&data.length>0&&react_default.a.createElement("div",{className:PermissionPanel_module_default.a.permissionGrid},react_default.a.createElement("span",{style:{textAlign:'center',fontWeight:'bold'}},"RUOLO"),react_default.a.createElement("span",{style:{textAlign:'center',fontWeight:'bold'}},"LETTURA"),react_default.a.createElement("span",{style:{textAlign:'center',fontWeight:'bold'}},"SCRITTURA"),react_default.a.createElement("span",{style:{textAlign:'center',fontWeight:'bold'}},"PERMESSI"),this.state.data.map(function(el){return react_default.a.createElement(react_default.a.Fragment,{key:el.roleId},react_default.a.createElement("span",{className:"".concat(PermissionPanel_module_default.a.perm," ").concat(PermissionPanel_module_default.a.left)},el.roleName),react_default.a.createElement("span",{className:PermissionPanel_module_default.a.perm},react_default.a.createElement("input",{type:"checkbox",value:'R',onChange:_this2.handleChange(el),defaultChecked:el.read})),react_default.a.createElement("span",{className:PermissionPanel_module_default.a.perm},react_default.a.createElement("input",{type:"checkbox",value:'W',onChange:_this2.handleChange(el),defaultChecked:el.write})),react_default.a.createElement("span",{className:PermissionPanel_module_default.a.perm},react_default.a.createElement("input",{type:"checkbox",value:'P',onChange:_this2.handleChange(el),defaultChecked:el.permission})));})),!loading&&error&&react_default.a.createElement("div",null,error));}}]);return PermissionPanel;}(react["Component"]);PermissionPanel_PermissionPanel.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/PermissionPanel/index.ts

// EXTERNAL MODULE: ./src/components/Panel/ImportPanel/ImportPanel.module.css
var ImportPanel_module = __webpack_require__(47);
var ImportPanel_module_default = /*#__PURE__*/__webpack_require__.n(ImportPanel_module);

// CONCATENATED MODULE: ./src/components/Panel/ImportPanel/ImportPanel.tsx
var ImportPanel_ImportPanel=/*#__PURE__*/function(_PureComponent){Object(inherits["a" /* default */])(ImportPanel,_PureComponent);function ImportPanel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,ImportPanel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(ImportPanel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={comandi:null,selectedFile:null,risultato:null,note:null,warning:null};_this.onFileChange=function(event){// Update the state 
_this.setState({selectedFile:event.target.files[0],note:null,risultato:null});};_this.onSubmit=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var form,fetchUrl,res,data;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:form=new FormData();form.append('comandi',JSON.stringify(_this.state.comandi));//const aut = "p_auth="+window["Liferay"].authToken
fetchUrl='/o/rubrica/upload/';_context.next=5;return fetch(fetchUrl,{headers:new Headers(),method:'POST',credentials:"include",body:form});case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;_this.setState({comandi:null,selectedFile:null,note:data.note,risultato:data.risultato});case 10:case"end":return _context.stop();}}},_callee);}));_this.onFileUpload=/*#__PURE__*/Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var formData,headers,res,data;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Create an object of formData 
formData=new FormData();headers=new Headers();// Update the formData object 
formData.append("file",_this.state.selectedFile,_this.state.selectedFile.name);// Details of the uploaded file 
console.log(_this.state.selectedFile);// Request made to the backend api 
// Send formData object 
_context2.next=6;return fetch('/o/rubrica/upload/',{headers:headers,method:'POST',credentials:"include",body:formData});case 6:res=_context2.sent;_context2.next=9;return res.json();case 9:data=_context2.sent;console.log(data);_this.setState({comandi:data,note:null,risultato:null,warning:_this.trovaNominativiMultipli(data)});case 12:case"end":return _context2.stop();}}},_callee2);}));_this.trovaNominativiMultipli=function(dati){var k;var j;var out=[];var list=[];for(k=0;k<dati.length;k++){if(dati[k].chiedi&&dati[k].decisione!='NOTHING'){var trovato=false;for(var i=0;i<list.length;i++){if(list[i]==dati[k].old)trovato=true;}if(trovato)continue;var testo=dati[k].nome+' '+dati[k].cognome+' ('+dati[k].nomeGruppo;var aggiungi=false;for(j=k+1;j<dati.length;j++){if(dati[j].old==dati[k].old&&dati[j].chiedi&&dati[j].decisione!='NOTHING'){testo+=', '+dati[j].nomeGruppo;aggiungi=true;}}if(aggiungi){out.push(testo+')');list.push(dati[k].old);}}}return out;};_this.stileDecisione=function(decisione){return ImportPanel_module_default.a[decisione?decisione.toLowerCase():'nothing'];};return _this;}Object(createClass["a" /* default */])(ImportPanel,[{key:"render",value:function render(){var _this2=this;return react_default.a.createElement(react_default.a.Fragment,null,this.state.note&&react_default.a.createElement("div",{className:this.state.risultato=='ok'?ImportPanel_module_default.a.noteok:ImportPanel_module_default.a.noteko},this.state.note),!this.state.comandi&&react_default.a.createElement("div",null,react_default.a.createElement("input",{type:"file",onChange:this.onFileChange}),react_default.a.createElement("button",{className:common_module_default.a.button,onClick:this.onFileUpload},"Carica")),this.state.warning&&this.state.warning.length>0&&react_default.a.createElement("div",null,react_default.a.createElement("b",null,"Attenzione: il file contiene modifiche ai seguenti nominativi ripetuti in righe diverse. Se si sceglie 'Cambia ovunque' su pi\xF9 di una riga, solo l'ultima sar\xE0 presa in considerazione."),react_default.a.createElement("ul",null,this.state.warning.map(function(item){return react_default.a.createElement("li",null,item);}))),this.state.comandi&&react_default.a.createElement("div",null,react_default.a.createElement("p",null,"Saranno eseguite le seguenti modifiche alla rubrica:"),react_default.a.createElement("table",{className:"".concat(ImportPanel_module_default.a.tabella)},react_default.a.createElement("thead",null,react_default.a.createElement("tr",null,react_default.a.createElement("th",{style:{width:'20%'}},"Gruppo"),react_default.a.createElement("th",{style:{width:'10%'}},"Azione"),react_default.a.createElement("th",{style:{width:'15%'}},"Nominativo"),react_default.a.createElement("th",{style:{width:'10%'}},"Ruolo"),react_default.a.createElement("th",{style:{width:'10%'}},"Altri gruppi"),react_default.a.createElement("th",{style:{width:'10%'}},"Indirizzo"),react_default.a.createElement("th",{style:{width:'25%'}},"Contatti"))),react_default.a.createElement("tbody",null,this.state.comandi.map(function(cmd){return react_default.a.createElement("tr",{className:"".concat(ImportPanel_module_default.a.riga)},react_default.a.createElement("td",{className:"".concat(ImportPanel_module_default.a.cella)},cmd.nomeGruppo),react_default.a.createElement("td",null,cmd.decisione!='NOTHING'&&react_default.a.createElement("span",{className:"".concat(_this2.stileDecisione(cmd.decisione))},cmd.decisione),cmd.chiedi&&react_default.a.createElement("div",null,react_default.a.createElement("select",{onChange:function onChange(e){cmd.risposta=e.target.value=='qui';}},react_default.a.createElement("option",{value:"ovunque"},"Cambia ovunque"),react_default.a.createElement("option",{value:"qui"},"Cambia solo qui")))),react_default.a.createElement("td",null,cmd.decisione=='UPDATE'&&(cmd.nome!=cmd.oldNome||cmd.cognome!=cmd.oldCognome)&&react_default.a.createElement("span",{className:"".concat(ImportPanel_module_default.a.deleted)},cmd.oldNome," ",cmd.oldCognome," ",react_default.a.createElement("br",null)),cmd.decisione=='DELETE'&&react_default.a.createElement("span",null,cmd.oldNome," ",cmd.oldCognome),cmd.nome," ",cmd.cognome),react_default.a.createElement("td",null,cmd.decisione=='UPDATE'&&(cmd.nomeRuolo!=cmd.oldNomeRuolo||cmd.specifica!=cmd.oldSpecifica)&&react_default.a.createElement("span",{className:"".concat(ImportPanel_module_default.a.deleted)},cmd.oldNomeRuolo," ",cmd.oldSpecifica," ",react_default.a.createElement("br",null)),cmd.decisione=='DELETE'&&react_default.a.createElement("span",null,cmd.oldNomeRuolo," ",cmd.oldSpecifica),cmd.nomeRuolo," ",cmd.specifica),react_default.a.createElement("td",null,cmd.nomiGruppiAppartenenza),react_default.a.createElement("td",null,cmd.decisione=='UPDATE'&&cmd.indirizzo!=cmd.oldIndirizzo&&react_default.a.createElement("span",{className:"".concat(ImportPanel_module_default.a.deleted)},cmd.oldIndirizzo,react_default.a.createElement("br",null)),cmd.indirizzo),react_default.a.createElement("td",null,cmd.contatti.map(function(cont){return react_default.a.createElement("div",null,react_default.a.createElement("span",null,cont.nomeCanale," ",cont.oldContatto," ",cont.decisione!='NOTHING'&&react_default.a.createElement("span",{className:"".concat(_this2.stileDecisione(cont.decisione))}," ",cont.decisione)),react_default.a.createElement("br",null));})));}))),react_default.a.createElement("br",null),react_default.a.createElement("br",null),react_default.a.createElement("div",{style:{maxWidth:'250px',display:'flex',justifyContent:'space-between !important'}},react_default.a.createElement("button",{className:"".concat(common_module_default.a.button),onClick:this.onSubmit},"Conferma"),react_default.a.createElement("button",{className:"".concat(common_module_default.a.button),onClick:function onClick(){_this2.setState({comandi:null,selectedFile:null,warning:null});}},"Annulla"))));}}]);return ImportPanel;}(react["PureComponent"]);
// CONCATENATED MODULE: ./src/components/Panel/ImportPanel/index.ts

// EXTERNAL MODULE: ./node_modules/react-dnd/dist/esm/hooks/useDrop.js + 3 modules
var useDrop = __webpack_require__(463);

// CONCATENATED MODULE: ./src/components/DragDrop/DroppableComponent.tsx
function DroppableComponent(props){var dndcontext=Object(react["useContext"])(DndContext["a" /* DndContext */]);//console.log(dndcontext)
if(dndcontext.dragDropManager===undefined){console.log('No context, no DnD');return react_default.a.createElement(react_default.a.Fragment,null,props.children);}var _useDrop=Object(useDrop["a" /* useDrop */])({accept:props.accept,drop:props.drop}),_useDrop2=Object(slicedToArray["a" /* default */])(_useDrop,2),collectedProps=_useDrop2[0],drop=_useDrop2[1];//console.log("DroppableComponent")
//console.log(props)
return react_default.a.createElement("div",{ref:drop},props.children);}
// CONCATENATED MODULE: ./src/components/Panel/Panel.tsx
var Panel_Panel=/*#__PURE__*/function(_PureComponent){Object(inherits["a" /* default */])(Panel,_PureComponent);function Panel(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,Panel);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(Panel)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.context=void 0;_this.panelRef=react_default.a.createRef();_this.state={inFocus:true};_this.focus=function(e){if(_this.props.id===_this.context.focusedIndex){_this.setState({inFocus:true});}else{_this.setState({inFocus:false});}_this.context.focusId(_this.props.id);};_this.refCallback=function(c){if(c&&c.props&&c.props.id){window['rubrica_panel_'+c.props.id]=c;console.log('rubrica_panel_'+c.props.id);console.log(window['rubrica_panel_'+c.props.id].state);}};_this.dropCallback=function(item,monitor){console.log('dropCallback');if(!item||!item.type)return;if(item.type==='GROUP')_this.context.onSelect(PanelType.GROUP_DETAILS,_this.props.id,item.data);if(item.type==='CONTACT')_this.context.onSelect(PanelType.CONTACT_DETAILS,_this.props.id,item.data);};return _this;}Object(createClass["a" /* default */])(Panel,[{key:"componentDidUpdate",value:function componentDidUpdate(){if(this.props.id!==this.context.focusedIndex){this.setState({inFocus:false});}else{this.setState({inFocus:true});}}},{key:"componentDidMount",value:function componentDidMount(){this.context.focusId(this.props.id);this.panelRef.current.addEventListener('click',this.focus);}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.panelRef.current.addEventListener('click',this.focus);}},{key:"render",value:function render(){var _this2=this;var type=this.props.type;return react_default.a.createElement(DroppableComponent,{accept:['GROUP','CONTACT'],drop:this.dropCallback},react_default.a.createElement("div",{className:"".concat(Panel_module_default.a.panel," ").concat(this.state.inFocus?Panel_module_default.a.inFocus:''),ref:this.panelRef,"data-id":this.props.id},react_default.a.createElement("div",{className:Panel_module_default.a.panelHeader},react_default.a.createElement(PanelSelector_PanelSelector,{id:this.props.id,selected:this.props.type}),react_default.a.createElement("div",{style:{display:'flex'}},this.context.panels.find(function(el){return el.id===_this2.props.id;}).history.length>0&&react_default.a.createElement("div",{tabIndex:0,onClick:this.context.onGoBack(this.props.id),style:{cursor:'pointer',marginRight:'1rem'}}," \uD83D\uDD19 "),react_default.a.createElement("div",{tabIndex:0,onClick:this.context.onSplit,style:{cursor:'pointer',marginRight:'1rem'}}," \u2795 "),react_default.a.createElement("div",{tabIndex:0,onClick:this.context.onMerge,style:{cursor:'pointer'}}," \u2796 "))),react_default.a.createElement("div",{className:Panel_module_default.a.panelBody},type===PanelType.CONTACTS&&react_default.a.createElement(ContactPanel_ContactPanel,{id:this.props.id,currentState:this.props.currentState}),type===PanelType.CONTACT_DETAILS&&react_default.a.createElement(ContactDetailPanel_ContactDetailPanel,{id:this.props.id,currentState:this.props.currentState}),type===PanelType.GROUPS&&react_default.a.createElement(GroupPanel_GroupPanel,{id:this.props.id,currentState:this.props.currentState}),type===PanelType.GROUP_DETAILS&&react_default.a.createElement(GroupDetailPanel_GroupDetailPanel,{id:this.props.id,currentState:this.props.currentState}),type===PanelType.LOGS&&react_default.a.createElement(LogPanel_LogPanel,{id:this.props.id,currentState:this.props.currentState}),type===PanelType.PERMISSION&&react_default.a.createElement(PermissionPanel_PermissionPanel,{id:this.props.id,currentState:this.props.currentState}),type===PanelType.IMPORT&&react_default.a.createElement(ImportPanel_ImportPanel,{id:this.props.id,currentState:this.props.currentState}))));}}]);return Panel;}(react["PureComponent"]);Panel_Panel.contextType=PanelContext;
// CONCATENATED MODULE: ./src/components/Panel/index.tsx

// CONCATENATED MODULE: ./src/components/Main/Timer.tsx
var Timer_Timer=/*#__PURE__*/function(_React$Component){Object(inherits["a" /* default */])(Timer,_React$Component);function Timer(props){var _this;Object(classCallCheck["a" /* default */])(this,Timer);_this=Object(possibleConstructorReturn["a" /* default */])(this,Object(getPrototypeOf["a" /* default */])(Timer).call(this,props));_this.state={time:0,start:0,timer:null,isOn:false};_this.startTimer=_this.startTimer.bind(Object(assertThisInitialized["a" /* default */])(Object(assertThisInitialized["a" /* default */])(_this)));_this.stopTimer=_this.stopTimer.bind(Object(assertThisInitialized["a" /* default */])(Object(assertThisInitialized["a" /* default */])(_this)));_this.resetTimer=_this.resetTimer.bind(Object(assertThisInitialized["a" /* default */])(Object(assertThisInitialized["a" /* default */])(_this)));return _this;}Object(createClass["a" /* default */])(Timer,[{key:"startTimer",value:function startTimer(){this.setState({time:this.state.time,start:Date.now()-this.state.time,isOn:true});this.setState({timer:setInterval(function(){return client.channels.all();},60000)});}},{key:"stopTimer",value:function stopTimer(){this.setState({isOn:false});clearInterval(this.state.timer);}},{key:"resetTimer",value:function resetTimer(){this.setState({time:0});}},{key:"render",value:function render(){if(!this.state.isOn)this.startTimer();return react_default.a.createElement("div",null);}}]);return Timer;}(react_default.a.Component);
// EXTERNAL MODULE: ./src/components/Main/main.module.css
var main_module = __webpack_require__(134);
var main_module_default = /*#__PURE__*/__webpack_require__.n(main_module);

// EXTERNAL MODULE: ./node_modules/react-toastify/dist/ReactToastify.css
var ReactToastify = __webpack_require__(453);

// CONCATENATED MODULE: ./src/components/Main/Main.tsx
var Main_Main=/*#__PURE__*/function(_Component){Object(inherits["a" /* default */])(Main,_Component);function Main(){var _getPrototypeOf2;var _this;Object(classCallCheck["a" /* default */])(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=Object(possibleConstructorReturn["a" /* default */])(this,(_getPrototypeOf2=Object(getPrototypeOf["a" /* default */])(Main)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loggedUser:undefined,channels:[],roles:[],permissions:[],rolesPermission:[],focusedIndex:'',cache:{},panels:new Array({id:genID(),type:PanelType.GROUPS,history:[]})};_this.setCache=function(panel,key,value){var cac=_this.state.cache?Object(objectSpread["a" /* default */])({},_this.state.cache):{};cac[panel+'_'+key]=value;_this.setState({cache:cac});};_this.getCache=function(panel,key){return _this.state.cache[panel+'_'+key];};_this.onSplit=function(){var panels=_this.state.panels;if(panels.length===2){return;};panels.push({id:genID(),type:PanelType.CONTACTS,history:[],resId:undefined});return _this.setState(Object(objectSpread["a" /* default */])({},_this.state,{panels:panels}),function(){window.dispatchEvent(new UIEvent('resize'));});};_this.onMerge=function(){var _this$state=_this.state,panels=_this$state.panels,focusedIndex=_this$state.focusedIndex;if(panels.length===1){return;};var newPanels=panels.filter(function(panel){return panel.id!==focusedIndex;});return _this.setState(Object(objectSpread["a" /* default */])({},_this.state,{panels:newPanels}),function(){_this.focusId(newPanels[0].id);window.dispatchEvent(new UIEvent('resize'));});};_this.onFocus=function(event){event.persist();var id=event.currentTarget.dataset.id;_this.setState(function(p){return{focusedIndex:id};});};_this.focusId=function(id){_this.setState(function(p){return{focusedIndex:id};});};_this.onSelect=function(type,id,resId,currentState){var panels=_this.state.panels;var newPanels=panels.map(function(panel){if(panel.id===id){panel.history.push({type:panel.type,resId:panel.resId,currentState:currentState});panel.type=type;panel.resId=resId;}return panel;});return _this.setState({panels:newPanels,focusedIndex:id});};_this.onNominative=function(resId,currentState){_this.onSelect(PanelType.CONTACT_DETAILS,_this.state.focusedIndex,resId,currentState);};_this.onGroup=function(resId,currentState){_this.onSelect(PanelType.GROUP_DETAILS,_this.state.focusedIndex,resId,currentState);};_this.onGoBack=function(panelId){return function(event){var panel=_this.state.panels.find(function(el){return el.id===panelId;});var panelHistory=panel.history;var poppedElement=panelHistory.pop();var newPanels=_this.state.panels.map(function(el){if(el.id===panelId){el.resId=poppedElement.resId;el.type=poppedElement.type;el.currentState=poppedElement.currentState;return el;}else{return el;}});_this.setState(function(p){return{panels:newPanels};});};};return _this;}Object(createClass["a" /* default */])(Main,[{key:"componentDidMount",value:function(){var _componentDidMount=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _ref,channels,_ref2,roles,_ref3,permissions,_ref4,rolesPermission,_ref5,loggedUser;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.channels.all();case 2:_ref=_context.sent;channels=_ref.data;_context.next=6;return client.roles.all();case 6:_ref2=_context.sent;roles=_ref2.data;_context.next=10;return client.permission.all();case 10:_ref3=_context.sent;permissions=_ref3.data;_context.next=14;return client.rolesPermission.all();case 14:_ref4=_context.sent;rolesPermission=_ref4.data;_context.next=18;return client.loggedUser();case 18:_ref5=_context.sent;loggedUser=_ref5.data;this.setState(function(p){return Object(objectSpread["a" /* default */])({},p,{channels:channels,roles:roles,loggedUser:loggedUser,permissions:permissions,rolesPermission:rolesPermission});});case 21:case"end":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:"render",value:function render(){var _this$state2=this.state,panels=_this$state2.panels,channels=_this$state2.channels,roles=_this$state2.roles,loggedUser=_this$state2.loggedUser,focusedIndex=_this$state2.focusedIndex,permissions=_this$state2.permissions,rolesPermission=_this$state2.rolesPermission,cache=_this$state2.cache;console.log('Main.render');console.log(esm["a" /* default */]);return react_default.a.createElement(DndProvider["a" /* DndProvider */],{backend:esm["a" /* default */]},react_default.a.createElement("main",{className:"".concat(main_module_default.a.mainWrapper)},react_default.a.createElement(Timer_Timer,null),react_default.a.createElement("section",{className:"".concat(main_module_default.a.panelsGrid," ").concat(main_module_default.a["grid".concat(panels.length)])},react_default.a.createElement(PanelContext.Provider,{value:{loggedUser:loggedUser,roles:roles,channels:channels,panels:panels,focusedIndex:focusedIndex,permissions:permissions,rolesPermission:rolesPermission,getCache:this.getCache,setCache:this.setCache,onGoBack:this.onGoBack,onMerge:this.onMerge,onSplit:this.onSplit,onSelect:this.onSelect,onFocus:this.onFocus,focusId:this.focusId}},panels.map(function(_ref6){var id=_ref6.id,type=_ref6.type,currentState=_ref6.currentState;return react_default.a.createElement(Panel_Panel,{key:"panel_".concat(id),id:id,type:type,currentState:currentState});}))),react_default.a.createElement(lib["ToastContainer"],null)));}}]);return Main;}(react["Component"]);
// CONCATENATED MODULE: ./src/components/Main/index.ts

// EXTERNAL MODULE: ./node_modules/url-search-params-polyfill/index.js
var url_search_params_polyfill = __webpack_require__(454);

// EXTERNAL MODULE: ./node_modules/ag-grid-community/dist/styles/ag-grid.css
var ag_grid = __webpack_require__(455);

// EXTERNAL MODULE: ./node_modules/ag-grid-community/dist/styles/ag-theme-material.css
var ag_theme_material = __webpack_require__(456);

// EXTERNAL MODULE: ./src/index.css
var src = __webpack_require__(457);

// CONCATENATED MODULE: ./src/index.tsx
// import 'ag-grid-enterprise';
Object(react_dom["render"])(react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Modal_Modal,null),react_default.a.createElement(Main_Main,null)),document.getElementById('app-root'));

/***/ }),

/***/ 47:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"deleted":"ImportPanel_deleted__NXmcx","nothing":"ImportPanel_nothing__1Ed4N","insert":"ImportPanel_insert__1YUO6","update":"ImportPanel_update__3_mbE","delete":"ImportPanel_delete__3C3C5","tabella":"ImportPanel_tabella__PgqCP","riga":"ImportPanel_riga__yCobw","cella":"ImportPanel_cella__1IH-J","noteok":"ImportPanel_noteok__2x_lM","noteko":"ImportPanel_noteko__1d7e3"};

/***/ }),

/***/ 67:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"backDrop":"Modal_backDrop__H96IY","modal":"Modal_modal__3OJ38","tallModal":"Modal_tallModal__1bZkN","modalTitle":"Modal_modalTitle__XI-9y","modalContent":"Modal_modalContent__3k-sj","modalActions":"Modal_modalActions__3EYz7"};

/***/ }),

/***/ 68:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"permissionGrid":"PermissionPanel_permissionGrid__2n4ve","perm":"PermissionPanel_perm__3VoZv","left":"PermissionPanel_left__2xt93"};

/***/ })

},[[273,1,2]]]);
//# sourceMappingURL=main.cfd30776.chunk.js.map